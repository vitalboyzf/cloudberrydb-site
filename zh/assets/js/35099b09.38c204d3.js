"use strict";(self.webpackChunkApache_Cloudberry_Incubating_website=self.webpackChunkApache_Cloudberry_Incubating_website||[]).push([[4447],{56735:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>c});var t=s(85893),i=s(11151);const r={title:"psql"},o="psql",a={id:"sys-utilities/psql",title:"psql",description:"Interactive command-line interface for Cloudberry Database",source:"@site/docs/sys-utilities/psql.md",sourceDirName:"sys-utilities",slug:"/sys-utilities/psql",permalink:"/zh/docs/sys-utilities/psql",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/cloudberry-site/edit/main/docs/sys-utilities/psql.md",tags:[],version:"current",lastUpdatedBy:"Ed Espino",lastUpdatedAt:1732764009,formattedLastUpdatedAt:"2024\u5e7411\u670828\u65e5",frontMatter:{title:"psql"},sidebar:"docsbars",previous:{title:"pg_filedump",permalink:"/zh/docs/sys-utilities/pg-filedump"},next:{title:"reindexdb",permalink:"/zh/docs/sys-utilities/reindexdb"}},d={},c=[{value:"Synopsis",id:"synopsis",level:2},{value:"Description",id:"description",level:2},{value:"Options",id:"options",level:2},{value:"Connection options",id:"connection-options",level:3},{value:"Exit status",id:"exit-status",level:2},{value:"Usage",id:"usage",level:2},{value:"Connect to a database",id:"connect-to-a-database",level:3},{value:"Enter SQL commands",id:"enter-sql-commands",level:3},{value:"Meta-commands",id:"meta-commands",level:2},{value:"Patterns",id:"patterns",level:2},{value:"Advanced features",id:"advanced-features",level:2},{value:"Variables",id:"variables",level:3},{value:"SQL interpolation",id:"sql-interpolation",level:3},{value:"Prompting",id:"prompting",level:3},{value:"Command-line editing",id:"command-line-editing",level:3},{value:"Environment",id:"environment",level:2},{value:"Files",id:"files",level:2},{value:"Notes",id:"notes",level:2},{value:"Notes for Windows Users",id:"notes-for-windows-users",level:2},{value:"Examples",id:"examples",level:2}];function l(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"psql",children:"psql"}),"\n",(0,t.jsx)(n.p,{children:"Interactive command-line interface for Cloudberry Database"}),"\n",(0,t.jsx)(n.h2,{id:"synopsis",children:"Synopsis"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"psql [<option> ...] [<dbname> [<username>]]\n"})}),"\n",(0,t.jsx)(n.h2,{id:"description",children:"Description"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"psql"})," is a terminal-based front-end to Cloudberry Database. It enables you to type in queries interactively, issue them to Cloudberry Database, and see the query results. Alternatively, input can be from a file. In addition, it provides a number of meta-commands and various shell-like features to facilitate writing scripts and automating a wide variety of tasks."]}),"\n",(0,t.jsx)(n.h2,{id:"options",children:"Options"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-a | --echo-all"})})}),"\n",(0,t.jsxs)(n.p,{children:["Print all nonempty input lines to standard output as they are read. (This does not apply to lines read interactively.) This is equivalent to setting the variable ECHO to ",(0,t.jsx)(n.code,{children:"all"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-A | --no-align"})})}),"\n",(0,t.jsx)(n.p,{children:"Switches to unaligned output mode. (The default output mode is aligned.)"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-c 'command' | --command='command'"})})}),"\n",(0,t.jsxs)(n.p,{children:["Specifies that ",(0,t.jsx)(n.code,{children:"psql"})," is to run the specified command string, and then exit. This is useful in shell scripts. command must be either a command string that is completely parseable by the server, or a single backslash command. Thus you cannot mix SQL and ",(0,t.jsx)(n.code,{children:"psql"})," meta-commands with this option. To achieve that, you could pipe the string into ",(0,t.jsx)(n.code,{children:"psql"}),", like this:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"echo '\\x \\\\ SELECT * FROM foo;' | psql\n"})}),"\n",(0,t.jsxs)(n.p,{children:["(",(0,t.jsx)(n.code,{children:"\\"})," is the separator meta-command.)"]}),"\n",(0,t.jsxs)(n.p,{children:["If the command string contains multiple SQL commands, they are processed in a single transaction, unless there are explicit ",(0,t.jsx)(n.code,{children:"BEGIN/COMMIT"})," commands included in the string to divide it into multiple transactions. This is different from the behavior when the same string is fed to ",(0,t.jsx)(n.code,{children:"psql"}),"'s standard input. Also, only the result of the last SQL command is returned."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-d dbname | --dbname=dbname"})})}),"\n",(0,t.jsx)(n.p,{children:"Specifies the name of the database to connect to. This is equivalent to specifying dbname as the first non-option argument on the command line."}),"\n",(0,t.jsxs)(n.p,{children:["If this parameter contains an ",(0,t.jsx)(n.code,{children:"="})," sign or starts with a valid URI prefix (",(0,t.jsx)(n.code,{children:"postgresql://"})," or ",(0,t.jsx)(n.code,{children:"postgres://"}),"), it is treated as a ",(0,t.jsx)(n.code,{children:"conninfo"})," string. See ",(0,t.jsx)(n.a,{href:"https://www.postgresql.org/docs/12/libpq-connect.html#LIBPQ-CONNSTRING",children:"Connection Strings"})," in the PostgreSQL documentation for more information."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-e | --echo-queries"})})}),"\n",(0,t.jsx)(n.p,{children:"Copy all SQL commands sent to the server to standard output as well."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-E | --echo-hidden"})})}),"\n",(0,t.jsxs)(n.p,{children:["Echo the actual queries generated by ",(0,t.jsx)(n.code,{children:"\\d"})," and other backslash commands. You can use this to study ",(0,t.jsx)(n.code,{children:"psql"}),"'s internal operations. This is equivalent to setting the variable ECHO_HIDDEN to ",(0,t.jsx)(n.code,{children:"on"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-f filename | --file=filename"})})}),"\n",(0,t.jsxs)(n.p,{children:["Use the file filename as the source of commands instead of reading commands interactively. After the file is processed, ",(0,t.jsx)(n.code,{children:"psql"})," terminates. This is in many ways equivalent to the meta-command ",(0,t.jsx)(n.code,{children:"\\i"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["If filename is ",(0,t.jsx)(n.code,{children:"-"})," (hyphen), then standard input is read until an EOF indication or ",(0,t.jsx)(n.code,{children:"\\q"})," meta-command. Note however that Readline is not used in this case (much as if ",(0,t.jsx)(n.code,{children:"-n"})," had been specified)."]}),"\n",(0,t.jsxs)(n.p,{children:["Using this option is subtly different from writing ",(0,t.jsx)(n.code,{children:"psql < <filename>"}),". In general, both will do what you expect, but using ",(0,t.jsx)(n.code,{children:"-f"})," enables some nice features such as error messages with line numbers. There is also a slight chance that using this option will reduce the start-up overhead. On the other hand, the variant using the shell's input redirection is (in theory) guaranteed to yield exactly the same output you would have received had you entered everything by hand."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-F separator | --field-separator=separator"})})}),"\n",(0,t.jsx)(n.p,{children:"Use the specified separator as the field separator for unaligned output."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-H | --html"})})}),"\n",(0,t.jsx)(n.p,{children:"Turn on HTML tabular output."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-l | --list"})})}),"\n",(0,t.jsx)(n.p,{children:"List all available databases, then exit. Other non-connection options are ignored."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-L filename | --log-file=filename"})})}),"\n",(0,t.jsx)(n.p,{children:"Write all query output into the specified log file, in addition to the normal output destination."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-n | --no-readline"})})}),"\n",(0,t.jsx)(n.p,{children:"Do not use Readline for line editing and do not use the command history. This can be useful to turn off tab expansion when cutting and pasting."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-o filename | --output=filename"})})}),"\n",(0,t.jsx)(n.p,{children:"Put all query output into the specified file."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-P assignment | --pset=assignment"})})}),"\n",(0,t.jsxs)(n.p,{children:["Allows you to specify printing options in the style of ",(0,t.jsx)(n.code,{children:"\\pset"})," on the command line. Note that here you have to separate name and value with an equal sign instead of a space. Thus to set the output format to ",(0,t.jsx)(n.code,{children:"LaTeX"}),", you could write ",(0,t.jsx)(n.code,{children:"-P format=latex"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-q | --quiet"})})}),"\n",(0,t.jsxs)(n.p,{children:["Specifies that ",(0,t.jsx)(n.code,{children:"psql"})," should do its work quietly. By default, it prints welcome messages and various informational output. If this option is used, none of this happens. This is useful with the ",(0,t.jsx)(n.code,{children:"-c"})," option. This is equivalent to setting the variable QUIET to ",(0,t.jsx)(n.code,{children:"on"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-R separator | --record-separator=separator"})})}),"\n",(0,t.jsx)(n.p,{children:"Use separator as the record separator for unaligned output."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-s | --single-step"})})}),"\n",(0,t.jsx)(n.p,{children:"Run in single-step mode. That means the user is prompted before each command is sent to the server, with the option to cancel execution as well. Use this to debug scripts."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-S | --single-line"})})}),"\n",(0,t.jsx)(n.p,{children:"Runs in single-line mode where a new line terminates an SQL command, as a semicolon does."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-t | --tuples-only"})})}),"\n",(0,t.jsxs)(n.p,{children:["Turn off printing of column names and result row count footers, etc. This command is equivalent to ",(0,t.jsx)(n.code,{children:"\\pset tuples_only"})," and is provided for convenience."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-T table_options | --table-attr= table_options"})})}),"\n",(0,t.jsxs)(n.p,{children:["Allows you to specify options to be placed within the HTML table tag. See ",(0,t.jsx)(n.code,{children:"\\pset"})," for details."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-v assignment | --set=assignment | --variable= assignment"})})}),"\n",(0,t.jsxs)(n.p,{children:["Perform a variable assignment, like the ",(0,t.jsx)(n.code,{children:"\\set"})," meta command. Note that you must separate name and value, if any, by an equal sign on the command line. To unset a variable, leave off the equal sign. To set a variable with an empty value, use the equal sign but leave off the value. These assignments are done during a very early stage of start-up, so variables reserved for internal purposes might get overwritten later."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-V | --version"})})}),"\n",(0,t.jsxs)(n.p,{children:["Print the ",(0,t.jsx)(n.code,{children:"psql"})," version and exit."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-x | --expanded"})})}),"\n",(0,t.jsx)(n.p,{children:"Turn on the expanded table formatting mode."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-X | --no-psqlrc"})})}),"\n",(0,t.jsxs)(n.p,{children:["Do not read the start-up file (neither the system-wide ",(0,t.jsx)(n.code,{children:"psqlrc"})," file nor the user's ",(0,t.jsx)(n.code,{children:"~/.psqlrc"})," file)."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-z | --field-separator-zero"})})}),"\n",(0,t.jsx)(n.p,{children:"Set the field separator for unaligned output to a zero byte."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-0 | --record-separator-zero"})})}),"\n",(0,t.jsxs)(n.p,{children:["Set the record separator for unaligned output to a zero byte. This is useful for interfacing, for example, with ",(0,t.jsx)(n.code,{children:"xargs -0"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-1 | --single-transaction"})})}),"\n",(0,t.jsxs)(n.p,{children:["When ",(0,t.jsx)(n.code,{children:"psql"})," runs a script, adding this option wraps ",(0,t.jsx)(n.code,{children:"BEGIN"}),"/",(0,t.jsx)(n.code,{children:"COMMIT"})," around the script to run it as a single transaction. This ensures that either all the commands complete successfully, or no changes are applied."]}),"\n",(0,t.jsxs)(n.p,{children:["If the script itself uses ",(0,t.jsx)(n.code,{children:"BEGIN"}),", ",(0,t.jsx)(n.code,{children:"COMMIT"}),", or ",(0,t.jsx)(n.code,{children:"ROLLBACK"}),", this option will not have the desired effects. Also, if the script contains any command that cannot be run inside a transaction block, specifying this option will cause that command (and hence the whole transaction) to fail."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-? | --help"})})}),"\n",(0,t.jsxs)(n.p,{children:["Show help about ",(0,t.jsx)(n.code,{children:"psql"})," command line arguments, and exit."]}),"\n",(0,t.jsx)(n.h3,{id:"connection-options",children:"Connection options"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-h host | --host=host"})})}),"\n",(0,t.jsxs)(n.p,{children:["The host name of the machine on which the Cloudberry coordinator database server is running. If not specified, reads from the environment variable ",(0,t.jsx)(n.code,{children:"PGHOST"})," or defaults to localhost."]}),"\n",(0,t.jsxs)(n.p,{children:["When starting ",(0,t.jsx)(n.code,{children:"psql"})," on the coordinator host, if the host value begins with a slash, it is used as the directory for the UNIX-domain socket."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-p port | --port=port"})})}),"\n",(0,t.jsxs)(n.p,{children:["The TCP port on which the Cloudberry coordinator database server is listening for connections. If not specified, reads from the environment variable ",(0,t.jsx)(n.code,{children:"PGPORT"})," or defaults to ",(0,t.jsx)(n.code,{children:"5432"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-U username | --username=username"})})}),"\n",(0,t.jsxs)(n.p,{children:["The database role name to connect as. If not specified, reads from the environment variable ",(0,t.jsx)(n.code,{children:"PGUSER"})," or defaults to the current system role name."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-W | --password"})})}),"\n",(0,t.jsxs)(n.p,{children:["Force a password prompt. ",(0,t.jsx)(n.code,{children:"psql"})," should automatically prompt for a password whenever the server requests password authentication. However, currently password request detection is not totally reliable, hence this option to force a prompt. If no password prompt is issued and the server requires password authentication, the connection attempt will fail."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-w --no-password"})})}),"\n",(0,t.jsx)(n.p,{children:"Never issue a password prompt. If the server requires password authentication and a password is not available by other means such as a .pgpass file, the connection attempt will fail. This option can be useful in batch jobs and scripts where no user is present to enter a password."}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note"})," This option remains set for the entire session, and so it affects uses of the meta-command ",(0,t.jsx)(n.code,{children:"\\connect"})," as well as the initial connection attempt."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"exit-status",children:"Exit status"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"psql"})," returns 0 to the shell if it finished normally, 1 if a fatal error of its own (out of memory, file not found) occurs, 2 if the connection to the server went bad and the session was not interactive, and 3 if an error occurred in a script and the variable ",(0,t.jsx)(n.code,{children:"ON_ERROR_STOP"})," was set."]}),"\n",(0,t.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,t.jsx)(n.h3,{id:"connect-to-a-database",children:"Connect to a database"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"psql"})," is a client application for Cloudberry Database. In order to connect to a database you need to know the name of your target database, the host name and port number of the Cloudberry coordinator server and what database user name you want to connect as. ",(0,t.jsx)(n.code,{children:"psql"})," can be told about those parameters via command line options, namely ",(0,t.jsx)(n.code,{children:"-d"}),", ",(0,t.jsx)(n.code,{children:"-h"}),", ",(0,t.jsx)(n.code,{children:"-p"}),", and ",(0,t.jsx)(n.code,{children:"-U"})," respectively. If an argument is found that does not belong to any option it will be interpreted as the database name (or the user name, if the database name is already given). Not all of these options are required; there are useful defaults. If you omit the host name, ",(0,t.jsx)(n.code,{children:"psql"})," will connect via a UNIX-domain socket to a coordinator server on the local host, or via TCP/IP to ",(0,t.jsx)(n.code,{children:"localhost"})," on machines that do not have UNIX-domain sockets. The default coordinator port number is 5432. If you use a different port for the coordinator, you must specify the port. The default database user name is your operating-system user name, as is the default database name. Note that you cannot just connect to any database under any user name. Your database administrator should have informed you about your access rights."]}),"\n",(0,t.jsxs)(n.p,{children:["When the defaults are not right, you can save yourself some typing by setting any or all of the environment variables ",(0,t.jsx)(n.code,{children:"PGAPPNAME"}),", ",(0,t.jsx)(n.code,{children:"PGDATABASE"}),", ",(0,t.jsx)(n.code,{children:"PGHOST"}),", ",(0,t.jsx)(n.code,{children:"PGPORT"}),", and ",(0,t.jsx)(n.code,{children:"PGUSER"})," to appropriate values."]}),"\n",(0,t.jsxs)(n.p,{children:["It is also convenient to have a ",(0,t.jsx)(n.code,{children:"~/.pgpass"})," file to avoid regularly having to type in passwords. This file should reside in your home directory and contain lines of the following format:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"<hostname>:<port>:<database>:<username>:<password>\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The permissions on ",(0,t.jsx)(n.code,{children:".pgpass"})," must disallow any access to world or group (for example: ",(0,t.jsx)(n.code,{children:"chmod 0600 ~/.pgpass"}),"). If the permissions are less strict than this, the file will be ignored. (The file permissions are not currently checked on Microsoft Windows clients, however.)"]}),"\n",(0,t.jsxs)(n.p,{children:["An alternative way to specify connection parameters is in a ",(0,t.jsx)(n.code,{children:"conninfo"})," string or a URI, which is used instead of a database name. This mechanism gives you very wide control over the connection. For example:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:'$ psql "service=myservice sslmode=require"\n$ psql postgresql://gpcoordinator:5433/mydb?sslmode=require\n'})}),"\n",(0,t.jsxs)(n.p,{children:["This way you can also use LDAP for connection parameter lookup as described in ",(0,t.jsx)(n.a,{href:"https://www.postgresql.org/docs/12/libpq-ldap.html",children:"LDAP Lookup of Connection Parameters"})," in the PostgreSQL documentation. See ",(0,t.jsx)(n.a,{href:"https://www.postgresql.org/docs/12/libpq-connect.html#LIBPQ-PARAMKEYWORDS",children:"Parameter Keywords"})," in the PostgreSQL documentation for more information on all the available connection options."]}),"\n",(0,t.jsxs)(n.p,{children:["If the connection could not be made for any reason (insufficient privileges, server is not running, etc.), ",(0,t.jsx)(n.code,{children:"psql"})," will return an error and terminate."]}),"\n",(0,t.jsxs)(n.p,{children:["If at least one of standard input or standard output are a terminal, then ",(0,t.jsx)(n.code,{children:"psql"})," sets the client encoding to ",(0,t.jsx)(n.code,{children:"auto"}),", which will detect the appropriate client encoding from the locale settings (",(0,t.jsx)(n.code,{children:"LC_CTYPE"})," environment variable on Unix systems). If this doesn't work out as expected, the client encoding can be overridden using the environment variable ",(0,t.jsx)(n.code,{children:"PGCLIENTENCODING"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"enter-sql-commands",children:"Enter SQL commands"}),"\n",(0,t.jsxs)(n.p,{children:["In normal operation, ",(0,t.jsx)(n.code,{children:"psql"})," provides a prompt with the name of the database to which ",(0,t.jsx)(n.code,{children:"psql"})," is currently connected, followed by the string ",(0,t.jsx)(n.strong,{children:"=>"})," for a regular user or ",(0,t.jsx)(n.strong,{children:"=#"})," for a superuser. For example:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"testdb=>\ntestdb=#\n"})}),"\n",(0,t.jsx)(n.p,{children:"At the prompt, the user may type in SQL commands. Ordinarily, input lines are sent to the server when a command-terminating semicolon is reached. An end of line does not terminate a command. Thus commands can be spread over several lines for clarity. If the command was sent and run without error, the results of the command are displayed on the screen."}),"\n",(0,t.jsxs)(n.p,{children:["If untrusted users have access to a database that has not adopted a ",(0,t.jsx)(n.a,{href:"https://www.postgresql.org/docs/12/ddl-schemas.html#DDL-SCHEMAS-PATTERNS",children:"secure schema usage pattern"}),", begin your session by removing publicly-writable schemas from search_path. You can add ",(0,t.jsx)(n.code,{children:"options=-csearch_path="})," to the connection string or issue ",(0,t.jsx)(n.code,{children:"SELECT pg_catalog.set_config('search_path', '', false)"})," before other SQL commands. This consideration is not specific to ",(0,t.jsx)(n.code,{children:"psql"}),"; it applies to every interface for running arbitrary SQL commands."]}),"\n",(0,t.jsx)(n.h2,{id:"meta-commands",children:"Meta-commands"}),"\n",(0,t.jsxs)(n.p,{children:["Anything you enter in ",(0,t.jsx)(n.code,{children:"psql"})," that begins with an unquoted backslash is a ",(0,t.jsx)(n.code,{children:"psql"})," meta-command that is processed by ",(0,t.jsx)(n.code,{children:"psql"})," itself. These commands help make ",(0,t.jsx)(n.code,{children:"psql"})," more useful for administration or scripting. Meta-commands are more commonly called slash or backslash commands."]}),"\n",(0,t.jsxs)(n.p,{children:["The format of a ",(0,t.jsx)(n.code,{children:"psql"})," command is the backslash, followed immediately by a command verb, then any arguments. The arguments are separated from the command verb and each other by any number of whitespace characters."]}),"\n",(0,t.jsxs)(n.p,{children:["To include whitespace into an argument you may quote it with single quotes. To include a single quote into such an argument, write two single quotes within single-quoted text. Anything contained in single quotes is furthermore subject to C-like substitutions for ",(0,t.jsx)(n.code,{children:"\\n"})," (new line), ",(0,t.jsx)(n.code,{children:"\\t"})," (tab), ",(0,t.jsx)(n.code,{children:"\\b"})," (backspace), ",(0,t.jsx)(n.code,{children:"\\r"})," (carriage return), ",(0,t.jsx)(n.code,{children:"\\f"})," (form feed), ",(0,t.jsx)(n.code,{children:"\\digits"})," (octal), and ",(0,t.jsx)(n.code,{children:"\\xdigits"})," (hexadecimal). A backslash preceding any other character within single-quoted text quotes that single character, whatever it is."]}),"\n",(0,t.jsx)(n.p,{children:"Within an argument, text that is enclosed in backquotes (```) is taken as a command line that is passed to the shell. The output of the command (with any trailing newline removed) replaces the backquoted text."}),"\n",(0,t.jsxs)(n.p,{children:["If an unquoted colon (",(0,t.jsx)(n.code,{children:":"}),") followed by a ",(0,t.jsx)(n.code,{children:"psql"})," variable name appears within an argument, it is replaced by the variable's value, as described in ",(0,t.jsx)(n.a,{href:"#sql-interpolation",children:"SQL interpolation"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Some commands take an SQL identifier (such as a table name) as argument. These arguments follow the syntax rules of SQL: Unquoted letters are forced to lowercase, while double quotes (",(0,t.jsx)(n.code,{children:'"'}),") protect letters from case conversion and allow incorporation of whitespace into the identifier. Within double quotes, paired double quotes reduce to a single double quote in the resulting name. For example, ",(0,t.jsx)(n.code,{children:'FOO"BAR"BAZ'})," is interpreted as ",(0,t.jsx)(n.code,{children:"fooBARbaz"}),", and ",(0,t.jsx)(n.code,{children:'"A weird"" name"'})," becomes ",(0,t.jsx)(n.code,{children:'A weird" name'}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Parsing for arguments stops when another unquoted backslash occurs. This is taken as the beginning of a new meta-command. The special sequence ",(0,t.jsx)(n.code,{children:"\\"})," (two backslashes) marks the end of arguments and continues parsing SQL commands, if any. That way SQL and ",(0,t.jsx)(n.code,{children:"psql"})," commands can be freely mixed on a line. But in any case, the arguments of a meta-command cannot continue beyond the end of the line."]}),"\n",(0,t.jsx)(n.p,{children:"The following meta-commands are defined:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\a"})})}),"\n",(0,t.jsxs)(n.p,{children:["If the current table output format is unaligned, it is switched to aligned. If it is not unaligned, it is set to unaligned. This command is kept for backwards compatibility. See ",(0,t.jsx)(n.code,{children:"\\pset"})," for a more general solution."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\c | \\connect [dbname [username] [host] [port]] | conninfo"})})}),"\n",(0,t.jsxs)(n.p,{children:["Establishes a new Cloudberry Database connection. The connection parameters to use can be specified either using a positional syntax, or using ",(0,t.jsx)(n.code,{children:"conninfo"})," connection strings as detailed in ",(0,t.jsx)(n.a,{href:"https://www.postgresql.org/docs/12/libpq-connect.html#LIBPQ-CONNSTRING",children:"libpq Connection Strings"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Where the command omits database name, user, host, or port, the new connection can reuse values from the previous connection. By default, values from the previous connection are reused except when processing a ",(0,t.jsx)(n.code,{children:"conninfo"})," string. Passing a first argument of ",(0,t.jsx)(n.code,{children:"-reuse-previous=on"})," or ",(0,t.jsx)(n.code,{children:"-reuse-previous=off"})," overrides that default. When the command neither specifies nor reuses a particular parameter, the ",(0,t.jsx)(n.code,{children:"libpq"})," default is used. Specifying any of dbname, username, host or port as ",(0,t.jsx)(n.code,{children:"-"})," is equivalent to omitting that parameter."]}),"\n",(0,t.jsxs)(n.p,{children:["If the new connection is successfully made, the previous connection is closed. If the connection attempt failed, the previous connection will only be kept if ",(0,t.jsx)(n.code,{children:"psql"})," is in interactive mode. When running a non-interactive script, processing will immediately stop with an error. This distinction was chosen as a user convenience against typos, and a safety mechanism that scripts are not accidentally acting on the wrong database."]}),"\n",(0,t.jsx)(n.p,{children:"Examples:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:'=> \\c mydb myuser host.dom 6432\n=> \\c service=foo\n=> \\c "host=localhost port=5432 dbname=mydb connect_timeout=10 sslmode=disable"\n=> \\c postgresql://tom@localhost/mydb?application_name=myapp\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\C [title]"})})}),"\n",(0,t.jsxs)(n.p,{children:["Sets the title of any tables being printed as the result of a query or unset any such title. This command is equivalent to ",(0,t.jsx)(n.code,{children:"\\pset title"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\cd [directory]"})})}),"\n",(0,t.jsxs)(n.p,{children:["Changes the current working directory. Without argument, changes to the current user's home directory. To print your current working directory, use ",(0,t.jsx)(n.code,{children:"\\!pwd"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\conninfo"})})}),"\n",(0,t.jsxs)(n.p,{children:["Displays information about the current connection including the database name, the user name, the type of connection (UNIX domain socket, ",(0,t.jsx)(n.code,{children:"TCP/IP"}),", etc.), the host, and the port."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\copy {table [(column_list)] | (query)} {from | to} {'filename' | program 'command' | stdin | stdout | pstdin | pstdout} [with] (option [, ...])"})})}),"\n",(0,t.jsxs)(n.p,{children:["Performs a frontend (client) copy. This is an operation that runs an SQL ",(0,t.jsx)(n.a,{href:"/zh/docs/sql-stmts/copy",children:(0,t.jsx)(n.code,{children:"COPY"})})," command, but instead of the server reading or writing the specified file, ",(0,t.jsx)(n.code,{children:"psql"})," reads or writes the file and routes the data between the server and the local file system. This means that file accessibility and privileges are those of the local user, not the server, and no SQL superuser privileges are required."]}),"\n",(0,t.jsxs)(n.p,{children:["When ",(0,t.jsx)(n.code,{children:"program"})," is specified, command is run by ",(0,t.jsx)(n.code,{children:"psql"})," and the data from or to command is routed between the server and the client. This means that the execution privileges are those of the local user, not the server, and no SQL superuser privileges are required."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"\\copy ... from stdin | to stdout"})," reads/writes based on the command input and output respectively. All rows are read from the same source that issued the command, continuing until ",(0,t.jsx)(n.code,{children:"\\."})," is read or the stream reaches ",(0,t.jsx)(n.code,{children:"EOF"}),". Output is sent to the same place as command output. To read/write from ",(0,t.jsx)(n.code,{children:"psql"}),"'s standard input or output, use ",(0,t.jsx)(n.code,{children:"pstdin"})," or ",(0,t.jsx)(n.code,{children:"pstdout"}),". This option is useful for populating tables in-line within a SQL script file."]}),"\n",(0,t.jsxs)(n.p,{children:["The syntax of the command is similar to that of the SQL ",(0,t.jsx)(n.a,{href:"/zh/docs/sql-stmts/copy",children:(0,t.jsx)(n.code,{children:"COPY"})})," command, and option must indicate one of the options of the SQL ",(0,t.jsx)(n.code,{children:"COPY"})," command. Note that, because of this, special parsing rules apply to the ",(0,t.jsx)(n.code,{children:"\\copy"})," command. In particular, the variable substitution rules and backslash escapes do not apply."]}),"\n",(0,t.jsxs)(n.p,{children:["This operation is not as efficient as the SQL ",(0,t.jsx)(n.code,{children:"COPY"})," command because all data must pass through the client/server connection."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\copyright"})})}),"\n",(0,t.jsx)(n.p,{children:"Shows the copyright and distribution terms of PostgreSQL on which Cloudberry Database is based."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\d [relation_pattern] \xa0| \\d+ [relation_pattern] | \\dS [relation_pattern]"})})}),"\n",(0,t.jsxs)(n.p,{children:["For each relation (table, external table, view, materialized view, index, sequence, or foreign table) or composite type matching the relation pattern, show all columns, their types, the tablespace (if not the default) and any special attributes such as ",(0,t.jsx)(n.code,{children:"NOT NULL"})," or defaults. Associated indexes, constraints, rules, and triggers are also shown. For foreign tables, the associated foreign server is shown as well."]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["For some types of relation, ",(0,t.jsx)(n.code,{children:"\\d"})," shows additional information for each column: column values for sequences, indexed expressions for indexes, and foreign data wrapper options for foreign tables."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["The command form ",(0,t.jsx)(n.code,{children:"\\d+"})," is identical, except that more information is displayed: any comments associated with the columns of the table are shown, as is the presence of OIDs in the table, the view definition if the relation is a view."]}),"\n",(0,t.jsxs)(n.p,{children:["For partitioned tables, the command ",(0,t.jsx)(n.code,{children:"\\d"})," or ",(0,t.jsx)(n.code,{children:"\\d+"})," specified with the root partitioned table or a child table displays information about the table including partition keys on the current level of the partitioned table. The command ",(0,t.jsx)(n.code,{children:"\\d+"})," also displays the immediate child partitions of the table and whether the partition is an external table or regular table."]}),"\n",(0,t.jsxs)(n.p,{children:["For append-optimized tables and column-oriented tables, ",(0,t.jsx)(n.code,{children:"\\d+"})," displays the storage options for a table. For append-optimized tables, the options are displayed for the table. For column-oriented tables, storage options are displayed for each column."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["By default, only user-created objects are shown; supply a pattern or the ",(0,t.jsx)(n.code,{children:"S"})," modifier to include system objects."]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note"})," If ",(0,t.jsx)(n.code,{children:"\\d"})," is used without a pattern argument, it is equivalent to ",(0,t.jsx)(n.code,{children:"\\dtvmsE"})," which will show a list of all visible tables, views, materialized views, sequences, and foreign tables."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\da[S] [aggregate_pattern]"})})}),"\n",(0,t.jsxs)(n.p,{children:["Lists aggregate functions, together with the data types they operate on. If a pattern is specified, only aggregates whose names match the pattern are shown. By default, only user-created objects are shown; supply a pattern or the ",(0,t.jsx)(n.code,{children:"S"})," modifier to include system objects."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\db[+] [tablespace_pattern]"})})}),"\n",(0,t.jsx)(n.p,{children:"Lists all available tablespaces and their corresponding paths. If pattern is specified, only tablespaces whose names match the pattern are shown. If + is appended to the command name, each object is listed with its associated permissions."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\dc[S+] [conversion_pattern]"})})}),"\n",(0,t.jsxs)(n.p,{children:["Lists conversions between character-set encodings. If a pattern is specified, only conversions whose names match the pattern are listed. By default, only user-created objects are shown; supply a pattern or the ",(0,t.jsx)(n.code,{children:"S"})," modifier to include system objects. If ",(0,t.jsx)(n.code,{children:"+"})," is appended to the command name, each object is listed with its associated description."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\dC[+] [pattern]"})})}),"\n",(0,t.jsxs)(n.p,{children:["Lists type casts. If a pattern is specified, only casts whose source or target types match the pattern are listed. If ",(0,t.jsx)(n.code,{children:"+"})," is appended to the command name, each object is listed with its associated description."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\dd[S] [pattern]"})})}),"\n",(0,t.jsxs)(n.p,{children:["Shows the descriptions of objects of type ",(0,t.jsx)(n.code,{children:"constraint"}),", ",(0,t.jsx)(n.code,{children:"operator class"}),", ",(0,t.jsx)(n.code,{children:"operator family"}),", ",(0,t.jsx)(n.code,{children:"rule"}),", and ",(0,t.jsx)(n.code,{children:"trigger"}),". All other comments may be viewed by the respective backslash commands for those object types."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"\\dd"})," displays descriptions for objects matching the pattern, or of visible objects of the appropriate type if no argument is given. But in either case, only objects that have a description are listed. By default, only user-created objects are shown; supply a pattern or the ",(0,t.jsx)(n.code,{children:"S"})," modifier to include system objects."]}),"\n",(0,t.jsxs)(n.p,{children:["Descriptions for objects can be created with the ",(0,t.jsx)(n.code,{children:"COMMENT"})," SQL command."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\ddp [pattern]"})})}),"\n",(0,t.jsx)(n.p,{children:"Lists default access privilege settings. An entry is shown for each role (and schema, if applicable) for which the default privilege settings have been changed from the built-in defaults. If pattern is specified, only entries whose role name or schema name matches the pattern are listed."}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.a,{href:"/zh/docs/sql-stmts/alter-default-privileges",children:(0,t.jsx)(n.code,{children:"ALTER DEFAULT PRIVILEGES"})})," command is used to set default access privileges. The meaning of the privilege display is explained under ",(0,t.jsx)(n.a,{href:"/zh/docs/sql-stmts/grant",children:"GRANT"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\dD[S+] [domain_pattern]"})})}),"\n",(0,t.jsxs)(n.p,{children:["Lists domains. If a pattern is specified, only domains whose names match the pattern are shown. By default, only user-created objects are shown; supply a pattern or the ",(0,t.jsx)(n.code,{children:"S"})," modifier to include system objects. If ",(0,t.jsx)(n.code,{children:"+"})," is appended to the command name, each object is listed with its associated permissions and description."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\dEimstPv[S+] [external_table | index | materialized_view | sequence | table | parent table | view]"})})}),"\n",(0,t.jsxs)(n.p,{children:["This is not the actual command name: the letters ",(0,t.jsx)(n.code,{children:"E"}),", ",(0,t.jsx)(n.code,{children:"i"}),", ",(0,t.jsx)(n.code,{children:"m"}),", ",(0,t.jsx)(n.code,{children:"s"}),", ",(0,t.jsx)(n.code,{children:"t"}),", ",(0,t.jsx)(n.code,{children:"P"}),", and ",(0,t.jsx)(n.code,{children:"v"})," stand for external table, index, materialized view, sequence, table, parent table, and view, respectively. You can specify any or all of these letters, in any order, to obtain a listing of objects of these types. For example, ",(0,t.jsx)(n.code,{children:"\\dit"})," lists indexes and tables. If ",(0,t.jsx)(n.code,{children:"+"})," is appended to the command name, each object is listed with its physical size on disk and its associated description, if any. If a pattern is specified, only objects whose names match the pattern are listed. By default, only user-created objects are shown; supply a pattern or the ",(0,t.jsx)(n.code,{children:"S"})," modifier to include system objects."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\des[+] [foreign_server_pattern]"})})}),"\n",(0,t.jsxs)(n.p,{children:["Lists foreign servers. If a pattern is specified, only those servers whose name matches the pattern are listed. If the form ",(0,t.jsx)(n.code,{children:"\\des+"})," is used, a full description of each server is shown, including the server's ACL, type, version, options, and description."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\det[+] [foreign_table_pattern]"})})}),"\n",(0,t.jsxs)(n.p,{children:["Lists all foreign tables. If a pattern is specified, only entries whose table name or schema name matches the pattern are listed. If the form ",(0,t.jsx)(n.code,{children:"\\det+"})," is used, generic options and the foreign table description are also displayed."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\deu[+] [user_mapping_pattern]"})})}),"\n",(0,t.jsxs)(n.p,{children:["Lists user mappings. If a pattern is specified, only those mappings whose user names match the pattern are listed. If the form ",(0,t.jsx)(n.code,{children:"\\deu+"})," is used, additional information about each mapping is shown."]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Caution"})," ",(0,t.jsx)(n.code,{children:"\\deu+"})," might also display the user name and password of the remote user, so care should be taken not to disclose them."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\dew[+] [foreign_data_wrapper_pattern]"})})}),"\n",(0,t.jsxs)(n.p,{children:["Lists foreign-data wrappers. If a pattern is specified, only those foriegn-data wrappers whose name matches the pattern are listed. If the form ",(0,t.jsx)(n.code,{children:"\\dew+"})," is used, the ACL, options, and description of the foreign-data wrapper are also shown."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\df[antwS+] [function_pattern]"})})}),"\n",(0,t.jsxs)(n.p,{children:['Lists functions, together with their arguments, return types, and function types, which are classified as "agg" (aggregate), "normal", "trigger", or "window". To display only functions of a specific type(s), add the corresponding letters ',(0,t.jsx)(n.code,{children:"a"}),", ",(0,t.jsx)(n.code,{children:"n"}),", ",(0,t.jsx)(n.code,{children:"t"}),", or ",(0,t.jsx)(n.code,{children:"w"}),", to the command. If a pattern is specified, only functions whose names match the pattern are shown. If the form ",(0,t.jsx)(n.code,{children:"\\df+"})," is used, additional information about each function, including security, volatility, language, source code, and description, is shown. By default, only user-created objects are shown; supply a pattern or the ",(0,t.jsx)(n.code,{children:"S"})," modifier to include system objects."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\dF[+] [pattern]"})})}),"\n",(0,t.jsxs)(n.p,{children:["Lists text search configurations. If a pattern is specified, only configurations whose names match the pattern are shown. If the form ",(0,t.jsx)(n.code,{children:"\\dF+"})," is used, a full description of each configuration is shown, including the underlying text search parser and the dictionary list for each parser token type."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\dFd[+] [pattern]"})})}),"\n",(0,t.jsxs)(n.p,{children:["Lists text search dictionaries. If a pattern is specified, only dictionaries whose names match the pattern are shown. If the form ",(0,t.jsx)(n.code,{children:"\\dFd+"})," is used, additional information is shown about each selected dictionary, including the underlying text search template and the option values."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\dFp[+] [pattern]"})})}),"\n",(0,t.jsxs)(n.p,{children:["Lists text search parsers. If a pattern is specified, only parsers whose names match the pattern are shown. If the form ",(0,t.jsx)(n.code,{children:"\\dFp+"})," is used, a full description of each parser is shown, including the underlying functions and the list of recognized token types."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\dFt[+] [pattern]"})})}),"\n",(0,t.jsxs)(n.p,{children:["Lists text search templates. If a pattern is specified, only templates whose names match the pattern are shown. If the form ",(0,t.jsx)(n.code,{children:"\\dFt+"})," is used, additional information is shown about each template, including the underlying function names."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\dg[+] [role_pattern]"})})}),"\n",(0,t.jsxs)(n.p,{children:['Lists database roles. (Since the concepts of "users" and "groups" have been unified into "roles", this command is now equivalent to ',(0,t.jsx)(n.code,{children:"\\du"}),".) If a pattern is specified, only those roles whose names match the pattern are listed. If the form ",(0,t.jsx)(n.code,{children:"\\dg+"})," is used, additional information is shown about each role; currently this adds the comment for each role."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\dl"})})}),"\n",(0,t.jsxs)(n.p,{children:["This is an alias for ",(0,t.jsx)(n.code,{children:"\\lo_list"}),", which shows a list of large objects."]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note"})," Cloudberry Database does not support the PostgreSQL ",(0,t.jsx)(n.a,{href:"https://www.postgresql.org/docs/12/largeobjects.html",children:"large object facility"})," for streaming user data that is stored in large-object structures."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\dL[S+] [pattern]"})})}),"\n",(0,t.jsxs)(n.p,{children:["Lists procedural languages. If a pattern is specified, only languages whose names match the pattern are listed. By default, only user-created languages are shown; supply the ",(0,t.jsx)(n.code,{children:"S"})," modifier to include system objects. If ",(0,t.jsx)(n.code,{children:"+"})," is appended to the command name, each language is listed with its call handler, validator, access privileges, and whether it is a system object."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\dn[S+] [schema_pattern]"})})}),"\n",(0,t.jsxs)(n.p,{children:["Lists all available schemas (namespaces). If a pattern is specified, only schemas whose names match the pattern are listed. By default, only user- create objects are show; supply a pattern or the ",(0,t.jsx)(n.code,{children:"S"})," modifier to include system objects. If ",(0,t.jsx)(n.code,{children:"+"})," is appended to the command name, each object is listed with its associated permissions and description, if any."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\do[S] [operator_pattern]"})})}),"\n",(0,t.jsxs)(n.p,{children:["Lists available operators with their operand and return types. If a pattern is specified, only operators whose names match the pattern are listed. By default, only user-created objects are shown; supply a pattern or the ",(0,t.jsx)(n.code,{children:"S"})," modifier to include system objects."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\dO[S+] [pattern]"})})}),"\n",(0,t.jsxs)(n.p,{children:["Lists collations. If a pattern is specified, only collations whose names match the pattern are listed. By default, only user-created objects are shown; supply a pattern or the ",(0,t.jsx)(n.code,{children:"S"})," modifier to include system objects. If ",(0,t.jsx)(n.code,{children:"+"})," is appended to the command name, each collation is listed with its associated description, if any. Note that only collations usable with the current database's encoding are shown, so the results may vary in different databases of the same installation."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\dp [relation_pattern_to_show_privileges]"})})}),"\n",(0,t.jsxs)(n.p,{children:["Lists tables, views, and sequences with their associated access privileges. If a pattern is specified, only tables, views, and sequences whose names match the pattern are listed. The ",(0,t.jsx)(n.a,{href:"/zh/docs/sql-stmts/grant",children:"GRANT"})," and ",(0,t.jsx)(n.a,{href:"/zh/docs/sql-stmts/revoke",children:"REVOKE"})," commands are used to set access privileges. The meaning of the privilege display is explained under ",(0,t.jsx)(n.a,{href:"/zh/docs/sql-stmts/grant",children:"GRANT"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\drds [role-pattern [database-pattern]]"})})}),"\n",(0,t.jsxs)(n.p,{children:["Lists defined configuration settings. These settings can be role-specific, database-specific, or both. role-pattern and database-pattern are used to select specific roles and database to list, respectively. If omitted, or if ",(0,t.jsx)(n.code,{children:"*"})," is specified, all settings are listed, including those not role-specific or database-specific, respectively."]}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.a,{href:"/zh/docs/sql-stmts/alter-role",children:(0,t.jsx)(n.code,{children:"ALTER ROLE"})})," and ",(0,t.jsx)(n.a,{href:"/zh/docs/sql-stmts/alter-database",children:(0,t.jsx)(n.code,{children:"ALTER DATABASE"})})," commands are used to define per-role and per-database role configuration settings."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\dT[S+] [datatype_pattern]"})})}),"\n",(0,t.jsxs)(n.p,{children:["Lists data types. If a pattern is specified, only types whose names match the pattern are listed. If ",(0,t.jsx)(n.code,{children:"+"})," is appended to the command name, each type is listed with its internal name and size, its allowed values if it is an ",(0,t.jsx)(n.code,{children:"enum"})," type, and its associated permissions. By default, only user-created objects are shown; supply a pattern or the ",(0,t.jsx)(n.code,{children:"S"})," modifier to include system objects."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\du[+] [role_pattern]"})})}),"\n",(0,t.jsxs)(n.p,{children:['Lists database roles. (Since the concepts of "users" and "groups" have been unified into "roles", this command is now equivalent to ',(0,t.jsx)(n.code,{children:"\\dg"}),".) If a pattern is specified, only those roles whose names match the pattern are listed. If the form ",(0,t.jsx)(n.code,{children:"\\du+"})," is used, additional information is shown about each role; currently this adds the comment for each role."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\dx[+] [extension_pattern]"})})}),"\n",(0,t.jsxs)(n.p,{children:["Lists installed extensions. If a pattern is specified, only those extensions whose names match the pattern are listed. If the form ",(0,t.jsx)(n.code,{children:"\\dx+"})," is used, all of the objects belonging to each matching extension are listed."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\dy[+] [pattern]"})})}),"\n",(0,t.jsxs)(n.p,{children:["Lists event triggers. If a pattern is specified, only those triggers whose names match the pattern are listed. If ",(0,t.jsx)(n.code,{children:"+"})," is appended to the command name, each object is listed with its associated description."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\dy[+] [pattern]"})})}),"\n",(0,t.jsxs)(n.p,{children:["Lists event triggers. If a pattern is specified, only those triggers whose names match the pattern are listed. If ",(0,t.jsx)(n.code,{children:"+"})," is appended to the command name, each object is listed with its associated description."]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note"})," Cloudberry Database does not support user-defined triggers."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\e | \\edit [filename] [line_number]"})})}),"\n",(0,t.jsx)(n.p,{children:"If filename is specified, the file is edited; after the editor exits, its content is copied back to the query buffer. If no filename is given, the current query buffer is copied to a temporary file which is then edited in the same fashion."}),"\n",(0,t.jsxs)(n.p,{children:["The new query buffer is then re-parsed according to the normal rules of ",(0,t.jsx)(n.code,{children:"psql"}),", where the whole buffer is treated as a single line. (Thus you cannot make scripts this way. Use ",(0,t.jsx)(n.code,{children:"\\i"})," for that.) This means also that if the query ends with (or rather contains) a semicolon, it is immediately run. In other cases it will merely wait in the query buffer; type semicolon or ",(0,t.jsx)(n.code,{children:"\\g"})," to send it, or ",(0,t.jsx)(n.code,{children:"\\r"})," to cancel."]}),"\n",(0,t.jsxs)(n.p,{children:["If a line number is specified, ",(0,t.jsx)(n.code,{children:"psql"})," will position the cursor on the specified line of the file or query buffer. Note that if a single all-digits argument is given, ",(0,t.jsx)(n.code,{children:"psql"})," assumes it is a line number, not a file name."]}),"\n",(0,t.jsxs)(n.p,{children:["See ",(0,t.jsx)(n.a,{href:"#section17",children:"Environment"})," for information about configuring and customizing your editor."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\echo text [ ... ]"})})}),"\n",(0,t.jsxs)(n.p,{children:["Prints the arguments to the standard output, separated by one space and followed by a newline. This can be useful to intersperse information in the output of scripts. If the first argument is an unquoted ",(0,t.jsx)(n.code,{children:"-n"}),", the trailing newline is not written."]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note"})," If you use the ",(0,t.jsx)(n.code,{children:"\\o"})," command to redirect your query output you might wish to use ",(0,t.jsx)(n.code,{children:"\\qecho"})," instead of this command."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\ef [function_description [line_number]]"})})}),"\n",(0,t.jsxs)(n.p,{children:["This command fetches and edits the definition of the named function, in the form of a ",(0,t.jsx)(n.code,{children:"CREATE OR REPLACE FUNCTION"})," command. Editing is done in the same way as for ",(0,t.jsx)(n.code,{children:"\\edit"}),". After the editor exits, the updated command waits in the query buffer; type semicolon or ",(0,t.jsx)(n.code,{children:"\\g"})," to send it, or ",(0,t.jsx)(n.code,{children:"\\r"})," to cancel."]}),"\n",(0,t.jsxs)(n.p,{children:["The target function can be specified by name alone, or by name and arguments, for example ",(0,t.jsx)(n.code,{children:"foo(integer, text)"}),". The argument types must be given if there is more than one function with the same name."]}),"\n",(0,t.jsxs)(n.p,{children:["If no function is specified, a blank ",(0,t.jsx)(n.code,{children:"CREATE FUNCTION"})," template is presented for editing."]}),"\n",(0,t.jsxs)(n.p,{children:["If a line number is specified, ",(0,t.jsx)(n.code,{children:"psql"})," will position the cursor on the specified line of the function body. (Note that the function body typically does not begin on the first line of the file.)"]}),"\n",(0,t.jsxs)(n.p,{children:["See ",(0,t.jsx)(n.a,{href:"#environment",children:"Environment"})," for information about configuring and customizing your editor."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\encoding [encoding]"})})}),"\n",(0,t.jsx)(n.p,{children:"Sets the client character set encoding. Without an argument, this command shows the current encoding."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\f [field_separator_string]"})})}),"\n",(0,t.jsxs)(n.p,{children:["Sets the field separator for unaligned query output. The default is the vertical bar (",(0,t.jsx)(n.code,{children:"|"}),"). See also ",(0,t.jsx)(n.code,{children:"\\pset"})," for a generic way of setting output options."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\g [filename]"})}),(0,t.jsx)("br",{}),"\n",(0,t.jsxs)(n.strong,{children:[(0,t.jsx)(n.code,{children:"\\g [ "}),"|",(0,t.jsx)(n.code,{children:" command ]"})]})]}),"\n",(0,t.jsx)(n.p,{children:"Sends the current query input buffer to the server, and optionally stores the query's output in filename or pipes the output to the shell command command. The file or command is written to only if the query successfully returns zero or more tuples, not if the query fails or is a non-data-returning SQL command."}),"\n",(0,t.jsxs)(n.p,{children:["A bare ",(0,t.jsx)(n.code,{children:"\\g"})," is essentially equivalent to a semi-colon. A ",(0,t.jsx)(n.code,{children:"\\g"})," with argument is a one-shot alternative to the ",(0,t.jsx)(n.code,{children:"\\o"})," command."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\gset [prefix]"})})}),"\n",(0,t.jsxs)(n.p,{children:["Sends the current query input buffer to the server and stores the query's output into ",(0,t.jsx)(n.code,{children:"psql"})," variables. The query to be run must return exactly one row. Each column of the row is stored into a separate variable, named the same as the column. For example:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"=> SELECT 'hello' AS var1, 10 AS var2;\n-> \\gset\n=> \\echo :var1 :var2\nhello 10\n"})}),"\n",(0,t.jsx)(n.p,{children:"If you specify a prefix, that string is prepended to the query's column names to create the variable names to use:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"=> SELECT 'hello' AS var1, 10 AS var2;\n-> \\gset result_\n=> \\echo :result_var1 :result_var2\nhello 10\n"})}),"\n",(0,t.jsx)(n.p,{children:"If a column result is NULL, the corresponding variable is unset rather than being set."}),"\n",(0,t.jsx)(n.p,{children:"If the query fails or does not return one row, no variables are changed."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\h | \\help [sql_command]"})})}),"\n",(0,t.jsxs)(n.p,{children:["Gives syntax help on the specified SQL command. If a command is not specified, then ",(0,t.jsx)(n.code,{children:"psql"})," will list all the commands for which syntax help is available. If command is an asterisk (",(0,t.jsx)(n.code,{children:"*"}),") then syntax help on all SQL commands is shown. To simplify typing, commands that consist of several words do not have to be quoted."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\H | \\html"})})}),"\n",(0,t.jsxs)(n.p,{children:["Turns on HTML query output format. If the HTML format is already on, it is switched back to the default aligned text format. This command is for compatibility and convenience, but see ",(0,t.jsx)(n.code,{children:"\\pset"})," about setting other output options."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\i | \\include filename"})})}),"\n",(0,t.jsx)(n.p,{children:"Reads input from the file filename and runs it as though it had been typed on the keyboard."}),"\n",(0,t.jsxs)(n.p,{children:["If filename is ",(0,t.jsx)(n.code,{children:"-"})," (hyphen), then standard input is read until an EOF indication or ",(0,t.jsx)(n.code,{children:"\\q"})," meta-command. This can be used to intersperse interactive input with input from files. Note that Readline behavior will be used only if it is active at the outermost level."]}),"\n",(0,t.jsxs)(n.p,{children:["If you want to see the lines on the screen as they are read you must set the variable ",(0,t.jsx)(n.code,{children:"ECHO"})," to ",(0,t.jsx)(n.code,{children:"all"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\ir | \\include_relative filename"})})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"\\ir"})," command is similar to ",(0,t.jsx)(n.code,{children:"\\i"}),", but resolves relative file names differently. When running in interactive mode, the two commands behave identically. However, when invoked from a script, ",(0,t.jsx)(n.code,{children:"\\ir"})," interprets file names relative to the directory in which the script is located, rather than the current working directory."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\l[+] | \\list[+] [pattern]"})})}),"\n",(0,t.jsxs)(n.p,{children:["List the databases in the server and show their names, owners, character set encodings, and access privileges. If a pattern is specified, only databases whose names match the pattern are listed. If ",(0,t.jsx)(n.code,{children:"+"})," is appended to the command name, database sizes, default tablespaces, and descriptions are also displayed. (Size information is only available for databases that the current user can connect to.)"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\lo_export loid filename"})})}),"\n",(0,t.jsxs)(n.p,{children:["Reads the large object with OID loid from the database and writes it to filename. Note that this is subtly different from the server function ",(0,t.jsx)(n.code,{children:"lo_export"}),", which acts with the permissions of the user that the database server runs as and on the server's file system. Use ",(0,t.jsx)(n.code,{children:"\\lo_list"})," to find out the large object's OID."]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note"})," Cloudberry Database does not support the PostgreSQL ",(0,t.jsx)(n.a,{href:"https://www.postgresql.org/docs/12/largeobjects.html",children:"large object facility"})," for streaming user data that is stored in large-object structures."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\lo_import large_object_filename [comment]"})})}),"\n",(0,t.jsx)(n.p,{children:"Stores the file into a large object. Optionally, it associates the given comment with the object. Example:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"mydb=> \\lo_import '/home/gpadmin/pictures/photo.xcf' 'a \npicture of me'\nlo_import 152801\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The response indicates that the large object received object ID 152801 which one ought to remember if one wants to access the object ever again. For that reason it is recommended to always associate a human-readable comment with every object. Those can then be seen with the ",(0,t.jsx)(n.code,{children:"\\lo_list"})," command. Note that this command is subtly different from the server-side ",(0,t.jsx)(n.code,{children:"lo_import"})," because it acts as the local user on the local file system, rather than the server's user and file system."]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note"})," Cloudberry Database does not support the PostgreSQL ",(0,t.jsx)(n.a,{href:"https://www.postgresql.org/docs/12/largeobjects.html",children:"large object facility"})," for streaming user data that is stored in large-object structures."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\lo_list"})})}),"\n",(0,t.jsx)(n.p,{children:"Shows a list of all large objects currently stored in the database, along with any comments provided for them."}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note"})," Cloudberry Database does not support the PostgreSQL ",(0,t.jsx)(n.a,{href:"https://www.postgresql.org/docs/12/largeobjects.html",children:"large object facility"})," for streaming user data that is stored in large-object structures."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\lo_unlink largeobject_oid"})})}),"\n",(0,t.jsxs)(n.p,{children:["Deletes the large object of the specified OID from the database. Use ",(0,t.jsx)(n.code,{children:"\\lo_list"})," to find out the large object's OID."]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note"})," Cloudberry Database does not support the PostgreSQL ",(0,t.jsx)(n.a,{href:"https://www.postgresql.org/docs/12/largeobjects.html",children:"large object facility"})," for streaming user data that is stored in large-object structures."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\o | \\out [ filename ]"})}),(0,t.jsx)("br",{}),"\n",(0,t.jsxs)(n.strong,{children:[(0,t.jsx)(n.code,{children:"\\o | \\out [ "}),"|",(0,t.jsx)(n.code,{children:" command ]"})]})]}),"\n",(0,t.jsxs)(n.p,{children:["Saves future query results to the file filename or pipes future results to the shell command command. If no argument is specified, the query output is reset to the standard output. Query results include all tables, command responses, and notices obtained from the database server, as well as output of various backslash commands that query the database (such as ",(0,t.jsx)(n.code,{children:"\\d"}),"), but not error messages. To intersperse text output in between query results, use ",(0,t.jsx)(n.code,{children:"\\qecho"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\p"})})}),"\n",(0,t.jsx)(n.p,{children:"Print the current query buffer to the standard output."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\password [username]"})})}),"\n",(0,t.jsxs)(n.p,{children:["Changes the password of the specified user (by default, the current user). This command prompts for the new password, encrypts it, and sends it to the server as an ",(0,t.jsx)(n.code,{children:"ALTER ROLE"})," command. This makes sure that the new password does not appear in cleartext in the command history, the server log, or elsewhere."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\prompt [ text ] name"})})}),"\n",(0,t.jsx)(n.p,{children:"Prompts the user to supply text, which is assigned to the variable name. An optional prompt string, text, can be specified. (For multiword prompts, surround the text with single quotes.)"}),"\n",(0,t.jsxs)(n.p,{children:["By default, ",(0,t.jsx)(n.code,{children:"\\prompt"})," uses the terminal for input and output. However, if the ",(0,t.jsx)(n.code,{children:"-f"})," command line switch was used, ",(0,t.jsx)(n.code,{children:"\\prompt"})," uses standard input and standard output."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\pset [print_option [value]]"})})}),"\n",(0,t.jsx)(n.p,{children:"This command sets options affecting the output of query result tables. print_option describes which option is to be set. The semantics of value vary depending on the selected option. For some options, omitting value causes the option to be toggled or unset, as described under the particular option. If no such behavior is mentioned, then omitting value just results in the current setting being displayed."}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"\\pset"})," without any arguments displays the current status of all printing options."]}),"\n",(0,t.jsx)(n.p,{children:"Adjustable printing options are:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"border"})})," \u2013 The value must be a number. In general, the higher the number the more borders and lines the tables will have, but this depends on the particular format. In HTML format, this will translate directly into the ",(0,t.jsx)(n.code,{children:"border=..."})," attribute; in the other formats only values ",(0,t.jsx)(n.code,{children:"0"})," (no border), ",(0,t.jsx)(n.code,{children:"1"})," (internal dividing lines), and ",(0,t.jsx)(n.code,{children:"2"})," (table frame) make sense. ",(0,t.jsx)(n.code,{children:"latex"})," and ",(0,t.jsx)(n.code,{children:"latex-longtable"})," also support a ",(0,t.jsx)(n.code,{children:"border"})," value of 3 which adds a dividing line between each row."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"columns"})})," \u2013 Sets the target width for the ",(0,t.jsx)(n.code,{children:"wrapped"})," format, and also the width limit for determining whether output is wide enough to require the pager or switch to the vertical display in expanded auto mode. The default is zero. Zero causes the target width to be controlled by the environment variable ",(0,t.jsx)(n.code,{children:"COLUMNS"}),", or the detected screen width if ",(0,t.jsx)(n.code,{children:"COLUMNS"})," is not set. In addition, if ",(0,t.jsx)(n.code,{children:"columns"})," is zero then the wrapped format affects screen output only. If columns is nonzero then file and pipe output is wrapped to that width as well."]}),"\n",(0,t.jsxs)(n.p,{children:["After setting the target width, use the command ",(0,t.jsx)(n.code,{children:"\\pset format wrapped"})," to enable the wrapped format."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"expanded"})})," | ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"x"})})," \u2013 If value is specified it must be either ",(0,t.jsx)(n.code,{children:"on"})," or ",(0,t.jsx)(n.code,{children:"off"}),", which will activate or deactivate expanded mode, or ",(0,t.jsx)(n.code,{children:"auto"}),". If value is omitted the command toggles between the ",(0,t.jsx)(n.code,{children:"on"})," and ",(0,t.jsx)(n.code,{children:"off"}),' settings. When expanded mode is enabled, query results are displayed in two columns, with the column name on the left and the data on the right. This mode is useful if the data wouldn\'t fit on the screen in the normal "horizontal" mode. In the ',(0,t.jsx)(n.code,{children:"auto"})," setting, the expanded mode is used whenever the query output is wider than the screen, otherwise the regular mode is used. The ",(0,t.jsx)(n.code,{children:"auto"})," setting is only effective in the aligned and wrapped formats. In other formats, it always behaves as if the expanded mode is ",(0,t.jsx)(n.code,{children:"off"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"fieldsep"})})," \u2013 Specifies the field separator to be used in unaligned output mode. That way one can create, for example, tab- or comma-separated output, which other programs might prefer. To set a tab as field separator, type ",(0,t.jsx)(n.code,{children:"\\pset\xa0fieldsep '\\t'"}),". The default field separator is ",(0,t.jsx)(n.code,{children:"'|'"})," (a vertical bar)."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"fieldsep_zero"})})," - Sets the field separator to use in unaligned output format to a zero byte."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"footer"})})," \u2013 If value is specified it must be either ",(0,t.jsx)(n.code,{children:"on"})," or ",(0,t.jsx)(n.code,{children:"off"})," which will activate or deactivate display of the table footer (the (n rows) count). If value is omitted the command toggles footer display on or off."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"format"})})," \u2013 Sets the output format to one of ",(0,t.jsx)(n.code,{children:"unaligned"}),", ",(0,t.jsx)(n.code,{children:"aligned"}),", ",(0,t.jsx)(n.code,{children:"html"}),", ",(0,t.jsx)(n.code,{children:"latex"})," (uses ",(0,t.jsx)(n.code,{children:"tabular"}),"), ",(0,t.jsx)(n.code,{children:"latex-longtable"}),", ",(0,t.jsx)(n.code,{children:"troff-ms"}),", or ",(0,t.jsx)(n.code,{children:"wrapped"}),". Unique abbreviations are allowed."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"unaligned"})})," format writes all columns of a row on one line, separated by the currently active field separator. This is useful for creating output that might be intended to be read in by other programs (for example, tab-separated or comma-separated format)."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"aligned"})})," format is the standard, human-readable, nicely formatted text output; this is the default."]}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"html"})}),", ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"latex"})}),", ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"latex-longtable"})}),", and ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"troff-ms"})})," formats put out tables that are intended to be included in documents using the respective mark-up language. They are not complete documents! (This might not be so dramatic in HTML, but in LaTeX you must have a complete document wrapper. ",(0,t.jsx)(n.code,{children:"latex-longtable"})," also requires the LaTeX ",(0,t.jsx)(n.code,{children:"longtable"})," and ",(0,t.jsx)(n.code,{children:"booktabs"})," packages.)"]}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"wrapped"})})," format is like ",(0,t.jsx)(n.code,{children:"aligned"}),", but wraps wide data values across lines to make the output fit in the target column width. The target width is determined as described under the ",(0,t.jsx)(n.code,{children:"columns"})," option. Note that ",(0,t.jsx)(n.code,{children:"psql"})," does not attempt to wrap column header titles; the ",(0,t.jsx)(n.code,{children:"wrapped"})," format behaves the same as ",(0,t.jsx)(n.code,{children:"aligned"})," if the total width needed for column headers exceeds the target."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"linestyle"})})," [",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"unicode"})})," | ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"ascii"})})," | ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"old-ascii"})}),"] \u2013 Sets the border line drawing style to one of unicode, ascii, or old-ascii. Unique abbreviations, including one letter, are allowed for the three styles. The default setting is ",(0,t.jsx)(n.code,{children:"ascii"}),". This option only affects the ",(0,t.jsx)(n.code,{children:"aligned"})," and ",(0,t.jsx)(n.code,{children:"wrapped"})," output formats."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"ascii"})})," \u2013 uses plain ASCII characters. Newlines in data are shown using a ",(0,t.jsx)(n.code,{children:"+"})," symbol in the right-hand margin. When the wrapped format wraps data from one line to the next without a newline character, a dot (",(0,t.jsx)(n.code,{children:"."}),") is shown in the right-hand margin of the first line, and again in the left-hand margin of the following line."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"old-ascii"})})," \u2013 style uses plain ASCII characters, using the formatting style used in PostgreSQL 8.4 and earlier. Newlines in data are shown using a ",(0,t.jsx)(n.code,{children:":"})," symbol in place of the left-hand column separator. When the data is wrapped from one line to the next without a newline character, a ",(0,t.jsx)(n.code,{children:";"})," symbol is used in place of the left-hand column separator."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"unicode"})})," \u2013 style uses Unicode box-drawing characters. Newlines in data are shown using a carriage return symbol in the right-hand margin. When the data is wrapped from one line to the next without a newline character, an ellipsis symbol is shown in the right-hand margin of the first line, and again in the left-hand margin of the following line."]}),"\n",(0,t.jsxs)(n.p,{children:["When the ",(0,t.jsx)(n.code,{children:"border"})," setting is greater than zero, this option also determines the characters with which the border lines are drawn. Plain ASCII characters work everywhere, but Unicode characters look nicer on displays that recognize them."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"null 'string'"})})," \u2013 The second argument is a string to print whenever a column is null. The default is to print nothing, which can easily be mistaken for an empty string. For example, one might prefer ",(0,t.jsx)(n.code,{children:"\\pset null '(null)'"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"numericlocale"})})," \u2013 If value is specified it must be either ",(0,t.jsx)(n.code,{children:"on"})," or ",(0,t.jsx)(n.code,{children:"off"})," which will activate or deactivate display of a locale-specific character to separate groups of digits to the left of the decimal marker. If value is omitted the command toggles between regular and locale-specific numeric output."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"pager"})})," \u2013 Controls the use of a pager for query and ",(0,t.jsx)(n.code,{children:"psql"})," help output. If the environment variable ",(0,t.jsx)(n.code,{children:"PAGER"})," is set, the output is piped to the specified program. Otherwise a platform-dependent default (such as ",(0,t.jsx)(n.code,{children:"more"}),") is used. When ",(0,t.jsx)(n.code,{children:"off"}),", the pager program is not used. When ",(0,t.jsx)(n.code,{children:"on"}),", the pager is used only when appropriate, i.e. when the output is to a terminal and will not fit on the screen. Pager can also be set to ",(0,t.jsx)(n.code,{children:"always"}),", which causes the pager to be used for all terminal output regardless of whether it fits on the screen. ",(0,t.jsx)(n.code,{children:"\\pset pager"})," without a value toggles pager use on and off."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"recordsep"})})," \u2013 Specifies the record (line) separator to use in unaligned output mode. The default is a newline character."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"recordsep_zero"})})," - Sets the record separator to use in unaligned output format to a zero byte."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"tableattr"})})," | ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"T"})})," [text] \u2013 In HTML format, this specifies attributes to be placed inside the HTML ",(0,t.jsx)(n.code,{children:"table"})," tag. This could for example be ",(0,t.jsx)(n.code,{children:"cellpadding"})," or ",(0,t.jsx)(n.code,{children:"bgcolor"}),". Note that you probably don't want to specify ",(0,t.jsx)(n.code,{children:"border"})," here, as that is already taken care of by ",(0,t.jsx)(n.code,{children:"\\pset border"}),". If no value is given, the table attributes are unset."]}),"\n",(0,t.jsxs)(n.p,{children:["In ",(0,t.jsx)(n.code,{children:"latex-longtable"})," format, this controls the proportional width of each column containing a left-aligned data type. It is specified as a whitespace-separated list of values, e.g. ",(0,t.jsx)(n.code,{children:"'0.2 0.2 0.6'"}),". Unspecified output columns use the last specified value."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"title"})})," [text] \u2013 Sets the table title for any subsequently printed tables. This can be used to give your output descriptive tags. If no value is given, the title is unset."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"tuples_only"})})," | ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"t"})})," [novalue | on | off] \u2013 If value is specified, it must be either ",(0,t.jsx)(n.code,{children:"on"})," or ",(0,t.jsx)(n.code,{children:"off"})," which will activate or deactivate tuples-only mode. If value is omitted the command toggles between regular and tuples-only output. Regular output includes extra information such as column headers, titles, and various footers. In tuples-only mode, only actual table data is shown. The ",(0,t.jsx)(n.code,{children:"\\t"})," command is equivalent to ",(0,t.jsx)(n.code,{children:"\\pset``tuples_only"})," and is provided for convenience."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Tip:"})}),"\n",(0,t.jsxs)(n.p,{children:["There are various shortcut commands for ",(0,t.jsx)(n.code,{children:"\\pset"}),". See ",(0,t.jsx)(n.code,{children:"\\a"}),", ",(0,t.jsx)(n.code,{children:"\\C"}),", ",(0,t.jsx)(n.code,{children:"\\f"}),", ",(0,t.jsx)(n.code,{children:"\\H"}),", ",(0,t.jsx)(n.code,{children:"\\t"}),", ",(0,t.jsx)(n.code,{children:"\\T"}),", and ",(0,t.jsx)(n.code,{children:"\\x"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\q | \\quit"})})}),"\n",(0,t.jsxs)(n.p,{children:["Quits the ",(0,t.jsx)(n.code,{children:"psql"})," program. In a script file, only execution of that script is terminated."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\qecho text [ ... ]"})})}),"\n",(0,t.jsxs)(n.p,{children:["This command is identical to ",(0,t.jsx)(n.code,{children:"\\echo"})," except that the output will be written to the query output channel, as set by ",(0,t.jsx)(n.code,{children:"\\o"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\r | \\reset"})})}),"\n",(0,t.jsx)(n.p,{children:"Resets (clears) the query buffer."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\s [filename]"})})}),"\n",(0,t.jsxs)(n.p,{children:["Print ",(0,t.jsx)(n.code,{children:"psql"}),"'s command line history to ",(0,t.jsx)(n.code,{children:"filename"}),". If ",(0,t.jsx)(n.code,{children:"filename"})," is omitted, the history is written to the standard output (using the pager if appropriate). This command is not available if ",(0,t.jsx)(n.code,{children:"psql"})," was built without ",(0,t.jsx)(n.code,{children:"Readline"})," support."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\set [name [value [ ... ]]]"})})}),"\n",(0,t.jsxs)(n.p,{children:["Sets the ",(0,t.jsx)(n.code,{children:"psql"})," variable name to value, or if more than one value is given, to the concatenation of all of them. If only one argument is given, the variable is just set with an empty value. To unset a variable, use the ",(0,t.jsx)(n.code,{children:"\\unset"})," command."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"\\set"})," without any arguments displays the names and values of all currently-set ",(0,t.jsx)(n.code,{children:"psql"})," variables."]}),"\n",(0,t.jsxs)(n.p,{children:['Valid variable names can contain characters, digits, and underscores. See "Variables" in ',(0,t.jsx)(n.a,{href:"#advanced-features",children:"Advanced features"}),". Variable names are case-sensitive."]}),"\n",(0,t.jsxs)(n.p,{children:["Although you are welcome to set any variable to anything you want, ",(0,t.jsx)(n.code,{children:"psql"})," treats several variables as special. They are documented in the topic about variables."]}),"\n",(0,t.jsxs)(n.p,{children:["This command is unrelated to the SQL command ",(0,t.jsx)(n.a,{href:"/zh/docs/sql-stmts/set",children:"SET"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\setenv name [ value ]"})})}),"\n",(0,t.jsx)(n.p,{children:"Sets the environment variable name to value, or if the value is not supplied, unsets the environment variable. Example:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"testdb=> \\setenv PAGER less\ntestdb=> \\setenv LESS -imx4F\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\sf[+] function_description"})})}),"\n",(0,t.jsxs)(n.p,{children:["This command fetches and shows the definition of the named function, in the form of a ",(0,t.jsx)(n.code,{children:"CREATE OR REPLACE FUNCTION"})," command. The definition is printed to the current query output channel, as set by ",(0,t.jsx)(n.code,{children:"\\o"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["The target function can be specified by name alone, or by name and arguments, for example ",(0,t.jsx)(n.code,{children:"foo(integer, text)"}),". The argument types must be given if there is more than one function of the same name."]}),"\n",(0,t.jsxs)(n.p,{children:["If ",(0,t.jsx)(n.code,{children:"+"})," is appended to the command name, then the output lines are numbered, with the first line of the function body being line 1."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\t [novalue | on | off]"})})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"\\t"})," command by itself toggles a display of output column name headings and row count footer. The values ",(0,t.jsx)(n.code,{children:"on"})," and ",(0,t.jsx)(n.code,{children:"off"})," set the tuples display, regardless of the current setting. This command is equivalent to ",(0,t.jsx)(n.code,{children:"\\pset tuples_only"})," and is provided for convenience."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\T table_options"})})}),"\n",(0,t.jsxs)(n.p,{children:["Specifies attributes to be placed within the ",(0,t.jsx)(n.code,{children:"table"})," tag in HTML output format. This command is equivalent to ",(0,t.jsx)(n.code,{children:"\\pset tableattr table_options"})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\timing [novalue | on | off]"})})}),"\n",(0,t.jsxs)(n.p,{children:["Without a parameter, toggles a display of how long each SQL statement takes, in milliseconds. The values ",(0,t.jsx)(n.code,{children:"on"})," and ",(0,t.jsx)(n.code,{children:"off"})," set the time display, regardless of the current setting."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\unset name"})})}),"\n",(0,t.jsxs)(n.p,{children:["Unsets (deletes) the ",(0,t.jsx)(n.code,{children:"psql"})," variable name."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\w | \\write filename"})}),(0,t.jsx)("br",{}),"\n",(0,t.jsxs)(n.strong,{children:[(0,t.jsx)(n.code,{children:"\\w | \\write "}),"|",(0,t.jsx)(n.code,{children:" command"})]})]}),"\n",(0,t.jsx)(n.p,{children:"Outputs the current query buffer to the file filename or pipes it to the shell command command."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\watch [seconds]"})})}),"\n",(0,t.jsxs)(n.p,{children:["Repeatedly runs the current query buffer (like ",(0,t.jsx)(n.code,{children:"\\g"}),") until interrupted or the query fails. Wait the specified number of seconds (default 2) between executions."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\x [ on | off | auto ]"})})}),"\n",(0,t.jsxs)(n.p,{children:["Sets or toggles expanded table formatting mode. As such it is equivalent to ",(0,t.jsx)(n.code,{children:"\\pset expanded"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\z [pattern]"})})}),"\n",(0,t.jsxs)(n.p,{children:["Lists tables, views, and sequences with their associated access privileges. If a pattern is specified, only tables, views and sequences whose names match the pattern are listed. This is an alias for ",(0,t.jsx)(n.code,{children:"\\dp"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\! [command]"})})}),"\n",(0,t.jsx)(n.p,{children:"Escapes to a separate shell or runs the shell command command. The arguments are not further interpreted; the shell will see them as-is. In particular, the variable substitution rules and backslash escapes do not apply."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"\\?"})})}),"\n",(0,t.jsxs)(n.p,{children:["Shows help information about the ",(0,t.jsx)(n.code,{children:"psql"})," backslash commands."]}),"\n",(0,t.jsx)(n.h2,{id:"patterns",children:"Patterns"}),"\n",(0,t.jsxs)(n.p,{children:["The various ",(0,t.jsx)(n.code,{children:"\\d"})," commands accept a pattern parameter to specify the object name(s) to be displayed. In the simplest case, a pattern is just the exact name of the object. The characters within a pattern are normally folded to lower case, just as in SQL names; for example, ",(0,t.jsx)(n.code,{children:"\\dt FOO"})," will display the table named ",(0,t.jsx)(n.code,{children:"foo"}),". As in SQL names, placing double quotes around a pattern stops folding to lower case. Should you need to include an actual double quote character in a pattern, write it as a pair of double quotes within a double-quote sequence; again this is in accord with the rules for SQL quoted identifiers. For example, ",(0,t.jsx)(n.code,{children:'\\dt "FOO""BAR"'})," will display the table named ",(0,t.jsx)(n.code,{children:'FOO"BAR'})," (not ",(0,t.jsx)(n.code,{children:'foo"bar'}),"). Unlike the normal rules for SQL names, you can put double quotes around just part of a pattern, for instance ",(0,t.jsx)(n.code,{children:'\\dt FOO"FOO"BAR'})," will display the table named ",(0,t.jsx)(n.code,{children:"fooFOObar"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Within a pattern, ",(0,t.jsx)(n.code,{children:"*"})," matches any sequence of characters (including no characters) and ",(0,t.jsx)(n.code,{children:"?"})," matches any single character. (This notation is comparable to UNIX shell file name patterns.) For example, ",(0,t.jsx)(n.code,{children:"\\dt int*"})," displays all tables whose names begin with ",(0,t.jsx)(n.code,{children:"int"}),". But within double quotes, ",(0,t.jsx)(n.code,{children:"*"})," and ",(0,t.jsx)(n.code,{children:"?"})," lose these special meanings and are just matched literally."]}),"\n",(0,t.jsxs)(n.p,{children:["A pattern that contains a dot (",(0,t.jsx)(n.code,{children:"."}),") is interpreted as a schema name pattern followed by an object name pattern. For example, ",(0,t.jsx)(n.code,{children:"\\dt foo*.bar*"})," displays all tables whose table name starts with ",(0,t.jsx)(n.code,{children:"bar"})," that are in schemas whose schema name starts with ",(0,t.jsx)(n.code,{children:"foo"}),". When no dot appears, then the pattern matches only objects that are visible in the current schema search path. Again, a dot within double quotes loses its special meaning and is matched literally."]}),"\n",(0,t.jsxs)(n.p,{children:["Advanced users can use regular-expression notations. All regular expression special characters work as specified in the ",(0,t.jsx)(n.a,{href:"https://www.postgresql.org/docs/12/functions-matching.html#FUNCTIONS-POSIX-REGEXP",children:"PostgreSQL documentation on regular expressions"}),", except for ",(0,t.jsx)(n.code,{children:"."})," which is taken as a separator as mentioned above, ",(0,t.jsx)(n.code,{children:"*"})," which is translated to the regular-expression notation ",(0,t.jsx)(n.code,{children:".*"}),", and ",(0,t.jsx)(n.code,{children:"?"})," which is translated to ",(0,t.jsx)(n.code,{children:".."})," You can emulate these pattern characters at need by writing ",(0,t.jsx)(n.code,{children:"?"})," for ",(0,t.jsx)(n.code,{children:".,``(R+|)"})," for ",(0,t.jsx)(n.code,{children:"R*"}),", or ",(0,t.jsx)(n.code,{children:"(R|)"})," for ",(0,t.jsx)(n.code,{children:"R?"}),". Remember that the pattern must match the whole name, unlike the usual interpretation of regular expressions; write ",(0,t.jsx)(n.code,{children:"*"})," at the beginning and/or end if you don't wish the pattern to be anchored. Note that within double quotes, all regular expression special characters lose their special meanings and are matched literally. Also, the regular expression special characters are matched literally in operator name patterns (such as the argument of ",(0,t.jsx)(n.code,{children:"\\do"}),")."]}),"\n",(0,t.jsxs)(n.p,{children:["Whenever the pattern parameter is omitted completely, the ",(0,t.jsx)(n.code,{children:"\\d"})," commands display all objects that are visible in the current schema search path \u2013 this is equivalent to using the pattern ",(0,t.jsx)(n.code,{children:"*."})," To see all objects in the database, use the pattern ",(0,t.jsx)(n.code,{children:"*.*."})]}),"\n",(0,t.jsx)(n.h2,{id:"advanced-features",children:"Advanced features"}),"\n",(0,t.jsx)(n.h3,{id:"variables",children:"Variables"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"psql"})," provides variable substitution features similar to common UNIX command shells. Variables are simply name/value pairs, where the value can be any string of any length. The name must consist of letters (including non-Latin letters), digits, and underscores."]}),"\n",(0,t.jsxs)(n.p,{children:["To set a variable, use the psql meta-command ",(0,t.jsx)(n.code,{children:"\\set"}),". For example,"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"testdb=> \\set foo bar\n"})}),"\n",(0,t.jsxs)(n.p,{children:["sets the variable ",(0,t.jsx)(n.code,{children:"foo"})," to the value ",(0,t.jsx)(n.code,{children:"bar"}),". To retrieve the content of the variable, precede the name with a colon, for example:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"testdb=> \\echo :foo\nbar\n"})}),"\n",(0,t.jsxs)(n.p,{children:["This works in both regular SQL commands and meta-commands; there is more detail in ",(0,t.jsx)(n.a,{href:"#sql-interpolation",children:"SQL interpolation"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["If you call ",(0,t.jsx)(n.code,{children:"\\set"})," without a second argument, the variable is set, with an empty string as value. To unset (i.e., delete) a variable, use the command ",(0,t.jsx)(n.code,{children:"\\unset"}),". To show the values of all variables, call ",(0,t.jsx)(n.code,{children:"\\set"})," without any argument."]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note"})," The arguments of ",(0,t.jsx)(n.code,{children:"\\set"})," are subject to the same substitution rules as with other commands. Thus you can construct interesting references such as ",(0,t.jsx)(n.code,{children:"\\set :foo 'something'"})," and get 'soft links' or 'variable variables' of Perl or PHP fame, respectively. Unfortunately, there is no way to do anything useful with these constructs. On the other hand, ",(0,t.jsx)(n.code,{children:"\\set bar :foo"})," is a perfectly valid way to copy a variable."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["A number of these variables are treated specially by\xa0",(0,t.jsx)(n.code,{children:"psql"}),". They represent certain option settings that can be changed at run time by altering the value of the variable, or in some cases represent changeable state of\xa0",(0,t.jsx)(n.code,{children:"psql"}),". Although you can use these variables for other purposes, this is not recommended, as the program behavior might grow really strange really quickly. By convention, all specially treated variables' names consist of all upper-case ASCII letters (and possibly digits and underscores). To ensure maximum compatibility in the future, avoid using such variable names for your own purposes. A list of all specially treated variables follows."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"AUTOCOMMIT"})})}),"\n",(0,t.jsxs)(n.p,{children:["When on (the default), each SQL command is automatically committed upon successful completion. To postpone commit in this mode, you must enter a ",(0,t.jsx)(n.code,{children:"BEGIN"})," or ",(0,t.jsx)(n.code,{children:"START TRANSACTION"})," SQL command. When off or unset, SQL commands are not committed until you explicitly issue ",(0,t.jsx)(n.code,{children:"COMMIT"})," or ",(0,t.jsx)(n.code,{children:"END"}),". The autocommit-on mode works by issuing an implicit ",(0,t.jsx)(n.code,{children:"BEGIN"})," for you, just before any command that is not already in a transaction block and is not itself a ",(0,t.jsx)(n.code,{children:"BEGIN"})," or other transaction-control command, nor a command that cannot be run inside a transaction block (such as ",(0,t.jsx)(n.code,{children:"VACUUM"}),")."]}),"\n",(0,t.jsxs)(n.p,{children:["In autocommit-off mode, you must explicitly abandon any failed transaction by entering ",(0,t.jsx)(n.code,{children:"ABORT"})," or ",(0,t.jsx)(n.code,{children:"ROLLBACK"}),". Also keep in mind that if you exit the session without committing, your work will be lost."]}),"\n",(0,t.jsxs)(n.p,{children:["The autocommit-on mode is PostgreSQL's traditional behavior, but autocommit-off is closer to the SQL spec. If you prefer autocommit-off, you may wish to set it in your ",(0,t.jsx)(n.code,{children:"~/.psqlrc"})," file."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"COMP_KEYWORD_CASE"})})}),"\n",(0,t.jsxs)(n.p,{children:["Determines which letter case to use when completing an SQL key word. If set to ",(0,t.jsx)(n.code,{children:"lower"})," or ",(0,t.jsx)(n.code,{children:"upper"}),", the completed word will be in lower or upper case, respectively. If set to ",(0,t.jsx)(n.code,{children:"preserve-lower"})," or ",(0,t.jsx)(n.code,{children:"preserve-upper"})," (the default), the completed word will be in the case of the word already entered, but words being completed without anything entered will be in lower or upper case, respectively."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"DBNAME"})})}),"\n",(0,t.jsx)(n.p,{children:"The name of the database you are currently connected to. This is set every time you connect to a database (including program start-up), but can be unset."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"ECHO"})})}),"\n",(0,t.jsxs)(n.p,{children:["If set to ",(0,t.jsx)(n.code,{children:"all"}),", all nonempty input lines are printed to standard output as they are read. (This does not apply to lines read interactively.) To select this behavior on program start-up, use the switch ",(0,t.jsx)(n.code,{children:"-a"}),". If set to queries, ",(0,t.jsx)(n.code,{children:"psql"})," prints each query to standard output as it is sent to the server. The switch for this is ",(0,t.jsx)(n.code,{children:"-e"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"ECHO_HIDDEN"})})}),"\n",(0,t.jsxs)(n.p,{children:["When this variable is set to ",(0,t.jsx)(n.code,{children:"on"})," and a backslash command queries the database, the query is first shown. This feature helps you to study Cloudberry Database internals and provide similar functionality in your own programs. (To select this behavior on program start-up, use the switch ",(0,t.jsx)(n.code,{children:"-E"}),".) If you set the variable to the value ",(0,t.jsx)(n.code,{children:"noexec"}),", the queries are just shown but are not actually sent to the server and run."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"ENCODING"})})}),"\n",(0,t.jsx)(n.p,{children:"The current client character set encoding."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"FETCH_COUNT"})})}),"\n",(0,t.jsxs)(n.p,{children:["If this variable is set to an integer value > 0, the results of ",(0,t.jsx)(n.code,{children:"SELECT"})," queries are fetched and displayed in groups of that many rows, rather than the default behavior of collecting the entire result set before display. Therefore only a limited amount of memory is used, regardless of the size of the result set. Settings of 100 to 1000 are commonly used when enabling this feature. Keep in mind that when using this feature, a query may fail after having already displayed some rows."]}),"\n",(0,t.jsxs)(n.p,{children:["Although you can use any output format with this feature, the default aligned format tends to look bad because each group of ",(0,t.jsx)(n.code,{children:"FETCH_COUNT"})," rows will be formatted separately, leading to varying column widths across the row groups. The other output formats work better."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"HISTCONTROL"})})}),"\n",(0,t.jsxs)(n.p,{children:["If this variable is set to ",(0,t.jsx)(n.code,{children:"ignorespace"}),", lines which begin with a space are not entered into the history list. If set to a value of ",(0,t.jsx)(n.code,{children:"ignoredups"}),", lines matching the previous history line are not entered. A value of ",(0,t.jsx)(n.code,{children:"ignoreboth"})," combines the two options. If unset, or if set to any other value than those above, all lines read in interactive mode are saved on the history list."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"HISTFILE"})})}),"\n",(0,t.jsxs)(n.p,{children:["The file name that will be used to store the history list. The default value is ",(0,t.jsx)(n.code,{children:"~/.psql_history"}),". For example, putting"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"\\set HISTFILE ~/.psql_history- :DBNAME\n"})}),"\n",(0,t.jsxs)(n.p,{children:["in ",(0,t.jsx)(n.code,{children:"~/.psqlrc"})," will cause ",(0,t.jsx)(n.code,{children:"psql"})," to maintain a separate history for each database."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"HISTSIZE"})})}),"\n",(0,t.jsx)(n.p,{children:"The number of commands to store in the command history. The default value is 500."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"HOST"})})}),"\n",(0,t.jsx)(n.p,{children:"The database server host you are currently connected to. This is set every time you connect to a database (including program start-up), but can be unset."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"IGNOREEOF"})})}),"\n",(0,t.jsxs)(n.p,{children:["If unset, sending an ",(0,t.jsx)(n.code,{children:"EOF"})," character (usually ",(0,t.jsx)(n.code,{children:"CTRL+D"}),") to an interactive session of ",(0,t.jsx)(n.code,{children:"psql"})," will terminate the application. If set to a numeric value, that many ",(0,t.jsx)(n.code,{children:"EOF"})," characters are ignored before the application terminates. If the variable is set but has no numeric value, the default is ",(0,t.jsx)(n.code,{children:"10"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"LASTOID"})})}),"\n",(0,t.jsxs)(n.p,{children:["The value of the last affected OID, as returned from an ",(0,t.jsx)(n.code,{children:"INSERT"})," or ",(0,t.jsx)(n.code,{children:"lo_import"})," command. This variable is only guaranteed to be valid until after the result of the next SQL command has been displayed."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"ON_ERROR_ROLLBACK"})})}),"\n",(0,t.jsxs)(n.p,{children:["When set to ",(0,t.jsx)(n.code,{children:"on"}),", if a statement in a transaction block generates an error, the error is ignored and the transaction continues. When set to ",(0,t.jsx)(n.code,{children:"interactive"}),", such errors are only ignored in interactive sessions, and not when reading script files. When unset or set to ",(0,t.jsx)(n.code,{children:"off"}),", a statement in a transaction block that generates an error cancels the entire transaction. The error rollback mode works by issuing an implicit ",(0,t.jsx)(n.code,{children:"SAVEPOINT"})," for you, just before each command that is in a transaction block, and rolls back to the savepoint on error."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"ON_ERROR_STOP"})})}),"\n",(0,t.jsxs)(n.p,{children:["By default, command processing continues after an error. When this variable is set to ",(0,t.jsx)(n.code,{children:"on"}),", processing will instead stop immediately. In interactive mode, ",(0,t.jsx)(n.code,{children:"psql"})," will return to the command prompt; otherwise, ",(0,t.jsx)(n.code,{children:"psql"})," will exit, returning error code 3 to distinguish this case from fatal error conditions, which are reported using error code 1. In either case, any currently running scripts (the top-level script, if any, and any other scripts which it may have in invoked) will be terminated immediately. If the top-level command string contained multiple SQL commands, processing will stop with the current command."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"PORT"})})}),"\n",(0,t.jsx)(n.p,{children:"The database server port to which you are currently connected. This is set every time you connect to a database (including program start-up), but can be unset."}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"PROMPT1"})}),(0,t.jsx)("br",{}),"\n",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"PROMPT2"})}),(0,t.jsx)("br",{}),"\n",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"PROMPT3"})})]}),"\n",(0,t.jsxs)(n.p,{children:["These specify what the prompts ",(0,t.jsx)(n.code,{children:"psql"}),' issues should look like. See "Prompting".']}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"QUIET"})})}),"\n",(0,t.jsxs)(n.p,{children:["Setting this variable to ",(0,t.jsx)(n.code,{children:"on"})," is equivalent to the command line option ",(0,t.jsx)(n.code,{children:"-q"}),". It is not very useful in interactive mode."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"SINGLELINE"})})}),"\n",(0,t.jsxs)(n.p,{children:["This variable is equivalent to the command line option ",(0,t.jsx)(n.code,{children:"-S"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"SINGLESTEP"})})}),"\n",(0,t.jsxs)(n.p,{children:["Setting this variable to ",(0,t.jsx)(n.code,{children:"on"})," is equivalent to the command line option ",(0,t.jsx)(n.code,{children:"-s"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"USER"})})}),"\n",(0,t.jsx)(n.p,{children:"The database user you are currently connected as. This is set every time you connect to a database (including program start-up), but can be unset."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"VERBOSITY"})})}),"\n",(0,t.jsxs)(n.p,{children:["This variable can be set to the values ",(0,t.jsx)(n.code,{children:"default"}),", ",(0,t.jsx)(n.code,{children:"verbose"}),", or ",(0,t.jsx)(n.code,{children:"terse"})," to control the verbosity of error reports."]}),"\n",(0,t.jsx)(n.h3,{id:"sql-interpolation",children:"SQL interpolation"}),"\n",(0,t.jsxs)(n.p,{children:["A key feature of ",(0,t.jsx)(n.code,{children:"psql"}),' variables is that you can substitute ("interpolate") them into regular SQL statements, as well as the arguments of meta-commands. Furthermore, ',(0,t.jsx)(n.code,{children:"psql"})," provides facilities for ensuring that variable values used as SQL literals and identifiers are properly quoted. The syntax for interpolating a value without any quoting is to prepend the variable name with a colon (",(0,t.jsx)(n.code,{children:":"}),"). For example,"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"testdb=> \\set foo 'my_table'\ntestdb=> SELECT * FROM :foo;\n"})}),"\n",(0,t.jsxs)(n.p,{children:["would query the table ",(0,t.jsx)(n.code,{children:"my_table"}),". Note that this may be unsafe: the value of the variable is copied literally, so it can contain unbalanced quotes, or even backslash commands. You must make sure that it makes sense where you put it."]}),"\n",(0,t.jsx)(n.p,{children:"When a value is to be used as an SQL literal or identifier, it is safest to arrange for it to be quoted. To quote the value of a variable as an SQL literal, write a colon followed by the variable name in single quotes. To quote the value as an SQL identifier, write a colon followed by the variable name in double quotes. These constructs deal correctly with quotes and other special characters embedded within the variable value. The previous example would be more safely written this way:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"testdb=> \\set foo 'my_table'\ntestdb=> SELECT * FROM :\"foo\";\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Variable interpolation will not be performed within quoted SQL literals and identifiers. Therefore, a construction such as ",(0,t.jsx)(n.code,{children:"':foo'"})," doesn't work to produce a quoted literal from a variable's value (and it would be unsafe if it did work, since it wouldn't correctly handle quotes embedded in the value)."]}),"\n",(0,t.jsx)(n.p,{children:"One example use of this mechanism is to copy the contents of a file into a table column. First load the file into a variable and then interpolate the variable's value as a quoted string:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"testdb=> \\set content `cat my_file.txt`\ntestdb=> INSERT INTO my_table VALUES (:'content');\n"})}),"\n",(0,t.jsxs)(n.p,{children:["(Note that this still won't work if ",(0,t.jsx)(n.code,{children:"my_file.txt"})," contains ",(0,t.jsx)(n.code,{children:"NUL"})," bytes. ",(0,t.jsx)(n.code,{children:"psql"})," does not support embedded ",(0,t.jsx)(n.code,{children:"NUL"})," bytes in variable values.)"]}),"\n",(0,t.jsxs)(n.p,{children:["Since colons can legally appear in SQL commands, an apparent attempt at interpolation (that is, ",(0,t.jsx)(n.code,{children:":name"}),", ",(0,t.jsx)(n.code,{children:":'name'"}),", or ",(0,t.jsx)(n.code,{children:':"name"'}),") is not replaced unless the named variable is currently set. In any case, you can escape a colon with a backslash to protect it from substitution."]}),"\n",(0,t.jsxs)(n.p,{children:["The colon syntax for variables is standard SQL for embedded query languages, such as ECPG. The colon syntaxes for array slices and type casts are Cloudberry Database extensions, which can sometimes conflict with the standard usage. The colon-quote syntax for escaping a variable's value as an SQL literal or identifier is a ",(0,t.jsx)(n.code,{children:"psql"})," extension."]}),"\n",(0,t.jsx)(n.h3,{id:"prompting",children:"Prompting"}),"\n",(0,t.jsxs)(n.p,{children:["The prompts ",(0,t.jsx)(n.code,{children:"psql"})," issues can be customized to your preference. The three variables ",(0,t.jsx)(n.code,{children:"PROMPT1"}),", ",(0,t.jsx)(n.code,{children:"PROMPT2"}),", and ",(0,t.jsx)(n.code,{children:"PROMPT3"})," contain strings and special escape sequences that describe the appearance of the prompt. Prompt 1 is the normal prompt that is issued when ",(0,t.jsx)(n.code,{children:"psql"})," requests a new command. Prompt 2 is issued when more input is expected during command entry, for example because the command was not terminated with a semicolon or a quote was not closed. Prompt 3 is issued when you are running an SQL ",(0,t.jsx)(n.code,{children:"COPY FROM STDIN"})," command and you need to type in a row value on the terminal."]}),"\n",(0,t.jsxs)(n.p,{children:["The value of the selected prompt variable is printed literally, except where a percent sign (",(0,t.jsx)(n.code,{children:"%"}),") is encountered. Depending on the next character, certain other text is substituted instead. Defined substitutions are:"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"%M"})})}),"\n",(0,t.jsxs)(n.p,{children:["The full host name (with domain name) of the database server, or ",(0,t.jsx)(n.code,{children:"[local]"})," if the connection is over a UNIX domain socket, or ",(0,t.jsx)(n.code,{children:"[local:/dir/name]"}),", if the UNIX domain socket is not at the compiled in default location."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"%m"})})}),"\n",(0,t.jsxs)(n.p,{children:["The host name of the database server, truncated at the first dot, or ",(0,t.jsx)(n.code,{children:"[local]"})," if the connection is over a UNIX domain socket."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"%>"})})}),"\n",(0,t.jsx)(n.p,{children:"The port number at which the database server is listening."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"%n"})})}),"\n",(0,t.jsxs)(n.p,{children:["The database session user name. (The expansion of this value might change during a database session as the result of the command ",(0,t.jsx)(n.code,{children:"SET SESSION AUTHORIZATION"}),".)"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"%/"})})}),"\n",(0,t.jsx)(n.p,{children:"The name of the current database."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"%~"})})}),"\n",(0,t.jsxs)(n.p,{children:["Like ",(0,t.jsx)(n.code,{children:"%/"}),", but the output is ",(0,t.jsx)(n.code,{children:"~"})," (tilde) if the database is your default database."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"%#"})})}),"\n",(0,t.jsxs)(n.p,{children:["If the session user is a database superuser, then a ",(0,t.jsx)(n.strong,{children:"#"}),", otherwise a ",(0,t.jsx)(n.strong,{children:">"}),". (The expansion of this value might change during a database session as the result of the command ",(0,t.jsx)(n.code,{children:"SET SESSION AUTHORIZATION"}),".)"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"%R"})})}),"\n",(0,t.jsxs)(n.p,{children:["In prompt 1 normally ",(0,t.jsx)(n.code,{children:"="}),", but ",(0,t.jsx)(n.code,{children:"^"})," if in single-line mode, or ",(0,t.jsx)(n.code,{children:"!"})," if the session is disconnected from the database (which can happen if ",(0,t.jsx)(n.code,{children:"\\connect"})," fails). In prompt 2 ",(0,t.jsx)(n.code,{children:"%R"})," is replaced by a character that depends on why ",(0,t.jsx)(n.code,{children:"psql"})," expects more input: ",(0,t.jsx)(n.code,{children:"-"})," if the command simply wasn't terminated yet, but ",(0,t.jsx)(n.code,{children:"*"})," if there is an unfinished ",(0,t.jsx)(n.code,{children:"/* ... */"})," comment, a single quote if there is an unfinished quoted string, a double quote if there is an unfinished quoted identifier, a dollar sign if there is an unfinished dollar-quoted string, or ",(0,t.jsx)(n.code,{children:"("})," if there is an unmatched left parenthesis. In prompt 3 ",(0,t.jsx)(n.code,{children:"%R"})," doesn't produce anything."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"%x"})})}),"\n",(0,t.jsxs)(n.p,{children:["Transaction status: an empty string when not in a transaction block, or ",(0,t.jsx)(n.strong,{children:"*"})," when in a transaction block, or ",(0,t.jsx)(n.strong,{children:"!"})," when in a failed transaction block, or ",(0,t.jsx)(n.strong,{children:"?"})," when the transaction state is indeterminate (for example, because there is no connection)."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"%digits"})})}),"\n",(0,t.jsx)(n.p,{children:"The character with the indicated octal code is substituted."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"%:name:"})})}),"\n",(0,t.jsxs)(n.p,{children:["The value of the ",(0,t.jsx)(n.code,{children:"psql"}),' variable name. See "Variables" in ',(0,t.jsx)(n.a,{href:"#advanced-features",children:"Advanced features"})," for details."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"%`command`"})})}),"\n",(0,t.jsx)(n.p,{children:"The output of command, similar to ordinary back-tick substitution."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"%[ ... %]"})})}),"\n",(0,t.jsxs)(n.p,{children:["Prompts may contain terminal control characters which, for example, change the color, background, or style of the prompt text, or change the title of the terminal window. In order for line editing to work properly, these non-printing control characters must be designated as invisible by surrounding them with ",(0,t.jsx)(n.code,{children:"%["})," and ",(0,t.jsx)(n.code,{children:"%]"}),". Multiple pairs of these may occur within the prompt. For example,"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"testdb=> \\set PROMPT1 '%[%033[1;33;40m%]%n@%/%R%[%033[0m%]%#'\n"})}),"\n",(0,t.jsxs)(n.p,{children:["results in a boldfaced (",(0,t.jsx)(n.code,{children:"1;"}),") yellow-on-black (",(0,t.jsx)(n.code,{children:"33;40"}),") prompt on VT100-compatible, color-capable terminals. To insert a percent sign into your prompt, write ",(0,t.jsx)(n.code,{children:"%%"}),". The default prompts are ",(0,t.jsx)(n.code,{children:"'%/%R%# '"})," for prompts 1 and 2, and ",(0,t.jsx)(n.code,{children:"'>> '"})," for prompt 3."]}),"\n",(0,t.jsx)(n.h3,{id:"command-line-editing",children:"Command-line editing"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"psql"})," uses the ",(0,t.jsx)(n.code,{children:"readline"})," library for convenient line editing and retrieval. The command history is automatically saved when ",(0,t.jsx)(n.code,{children:"psql"})," exits and is reloaded when ",(0,t.jsx)(n.code,{children:"psql"})," starts up. Tab-completion is also supported, although the completion logic makes no claim to be an SQL parser. The queries generated by tab-completion can also interfere with other SQL commands, e.g. ",(0,t.jsx)(n.code,{children:"SET TRANSACTION ISOLATION LEVEL"}),". If for some reason you do not like the tab completion, you can turn it off by putting this in a file named ",(0,t.jsx)(n.code,{children:".inputrc"})," in your home directory:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"$if psql\nset disable-completion on\n$endif\n"})}),"\n",(0,t.jsx)(n.h2,{id:"environment",children:"Environment"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"COLUMNS"})})}),"\n",(0,t.jsxs)(n.p,{children:["If ",(0,t.jsx)(n.code,{children:"\\pset columns"})," is zero, controls the width for the wrapped format and width for determining if wide output requires the pager or should be switched to the vertical format in expanded auto mode."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"PAGER"})})}),"\n",(0,t.jsxs)(n.p,{children:["If the query results do not fit on the screen, they are piped through this command. Typical values are ",(0,t.jsx)(n.code,{children:"more"})," or ",(0,t.jsx)(n.code,{children:"less"}),". The default is platform-dependent. The use of the pager can be deactivated by setting PAGER to empty, or by using pager-related options of the ",(0,t.jsx)(n.code,{children:"\\pset"})," command."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"PGDATABASE"})}),(0,t.jsx)("br",{}),"\n",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"PGHOST"})}),(0,t.jsx)("br",{}),"\n",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"PGPORT"})}),(0,t.jsx)("br",{}),"\n",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"PGUSER"})})]}),"\n",(0,t.jsx)(n.p,{children:"Default connection parameters."}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"PSQL_EDITOR"})}),(0,t.jsx)("br",{}),"\n",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"EDITOR"})}),(0,t.jsx)("br",{}),"\n",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"VISUAL"})})]}),"\n",(0,t.jsxs)(n.p,{children:["Editor used by the ",(0,t.jsx)(n.code,{children:"\\e"})," and ",(0,t.jsx)(n.code,{children:"\\ef"})," commands. The variables are examined in the order listed; the first that is set is used."]}),"\n",(0,t.jsxs)(n.p,{children:["The built-in default editors are ",(0,t.jsx)(n.code,{children:"vi"})," on Unix systems and ",(0,t.jsx)(n.code,{children:"notepad.exe"})," on Windows systems."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"PSQL_EDITOR_LINENUMBER_ARG"})})}),"\n",(0,t.jsxs)(n.p,{children:["When ",(0,t.jsx)(n.code,{children:"\\e"})," or ",(0,t.jsx)(n.code,{children:"\\ef"})," is used with a line number argument, this variable specifies the command-line argument used to pass the starting line number to the user's editor. For editors such as Emacs or ",(0,t.jsx)(n.code,{children:"vi"}),", this is a plus sign. Include a trailing space in the value of the variable if there needs to be space between the option name and the line number. Examples:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"PSQL_EDITOR_LINENUMBER_ARG='+'\nPSQL_EDITOR_LINENUMBER_ARG='--line '\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The default is ",(0,t.jsx)(n.code,{children:"+"})," on Unix systems (corresponding to the default editor ",(0,t.jsx)(n.code,{children:"vi"}),", and useful for many other common editors); but there is no default on Windows systems."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"PSQL_HISTORY"})})}),"\n",(0,t.jsxs)(n.p,{children:["Alternative location for the command history file. Tilde (",(0,t.jsx)(n.code,{children:"~"}),") expansion is performed."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"PSQLRC"})})}),"\n",(0,t.jsxs)(n.p,{children:["Alternative location of the user's ",(0,t.jsx)(n.code,{children:".psqlrc"})," file. Tilde (",(0,t.jsx)(n.code,{children:"~"}),") expansion is performed."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"SHELL"})})}),"\n",(0,t.jsxs)(n.p,{children:["Command run by the ",(0,t.jsx)(n.code,{children:"\\!"})," command."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"TMPDIR"})})}),"\n",(0,t.jsxs)(n.p,{children:["Directory for storing temporary files. The default is ",(0,t.jsx)(n.code,{children:"/tmp"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"files",children:"Files"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"psqlrc and ~/.psqlrc"})})}),"\n",(0,t.jsxs)(n.p,{children:["Unless it is passed an ",(0,t.jsx)(n.code,{children:"-X"})," or ",(0,t.jsx)(n.code,{children:"-c"})," option, ",(0,t.jsx)(n.code,{children:"psql"})," attempts to read and run commands from the system-wide startup file (",(0,t.jsx)(n.code,{children:"psqlrc"}),") and then the user's personal startup file (",(0,t.jsx)(n.code,{children:"~/.psqlrc"}),"), after connecting to the database but before accepting normal commands. These files can be used to set up the client and/or the server to taste, typically with ",(0,t.jsx)(n.code,{children:"\\set"})," and ",(0,t.jsx)(n.code,{children:"SET"})," commands."]}),"\n",(0,t.jsxs)(n.p,{children:["The system-wide startup file is named ",(0,t.jsx)(n.code,{children:"psqlrc"}),' and is sought in the installation\'s "system configuration" directory, which is most reliably identified by running ',(0,t.jsx)(n.code,{children:"pg_config --sysconfdir"}),". By default this directory will be",(0,t.jsx)(n.code,{children:"../etc/"})," relative to the directory containing the Cloudberry Database executables. The name of this directory can be set explicitly via the ",(0,t.jsx)(n.code,{children:"PGSYSCONFDIR"})," environment variable."]}),"\n",(0,t.jsxs)(n.p,{children:["The user's personal startup file is named ",(0,t.jsx)(n.code,{children:".psqlrc"})," and is sought in the invoking user's home directory. On Windows, which lacks such a concept, the personal startup file is named ",(0,t.jsx)(n.code,{children:"%APPDATA%\\postgresql\\psqlrc.conf"}),". The location of the user's startup file can be set explicitly via the ",(0,t.jsx)(n.code,{children:"PSQLRC"})," environment variable."]}),"\n",(0,t.jsxs)(n.p,{children:["Both the system-wide startup file and the user's personal startup file can be made psql-version-specific by appending a dash and the underlying PostgreSQL major or minor release number to the file name, for example ",(0,t.jsx)(n.code,{children:"~/.psqlrc-9.4"}),". The most specific version-matching file will be read in preference to a non-version-specific file."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:".psql_history"})})}),"\n",(0,t.jsxs)(n.p,{children:["The command-line history is stored in the file ",(0,t.jsx)(n.code,{children:"~/.psql_history"}),", or",(0,t.jsx)(n.code,{children:"%APPDATA%\\postgresql\\psql_history"})," on Windows."]}),"\n",(0,t.jsxs)(n.p,{children:["The location of the history file can be set explicitly via the ",(0,t.jsx)(n.code,{children:"PSQL_HISTORY"})," environment variable."]}),"\n",(0,t.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"psql"})," works best with servers of the same or an older major version. Backslash commands are particularly likely to fail if the server is of a newer version than ",(0,t.jsx)(n.code,{children:"psql"})," itself. However, backslash commands of the ",(0,t.jsx)(n.code,{children:"\\d"})," family should work with older server versions, though not necessarily with servers newer than ",(0,t.jsx)(n.code,{children:"psql"})," itself. The general functionality of running SQL commands and displaying query results should also work with servers of a newer major version, but this cannot be guaranteed in all cases."]}),"\n",(0,t.jsxs)(n.p,{children:["If you want to use ",(0,t.jsx)(n.code,{children:"psql"})," to connect to several servers of different major versions, it is recommended that you use the newest version of ",(0,t.jsx)(n.code,{children:"psql"}),". Alternatively, you can keep a copy of ",(0,t.jsx)(n.code,{children:"psql"})," from each major version around and be sure to use the version that matches the respective server. But in practice, this additional complication should not be necessary."]}),"\n",(0,t.jsx)(n.h2,{id:"notes-for-windows-users",children:"Notes for Windows Users"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"psql"})," is built as a console application. Since the Windows console windows use a different encoding than the rest of the system, you must take special care when using 8-bit characters within ",(0,t.jsx)(n.code,{children:"psql"}),". If ",(0,t.jsx)(n.code,{children:"psql"})," detects a problematic console code page, it will warn you at startup. To change the console code page, two things are necessary:"]}),"\n",(0,t.jsx)(n.p,{children:"Set the code page by entering:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"cmd.exe /c chcp 1252\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"1252"})," is a character encoding of the Latin alphabet, used by Microsoft Windows for English and some other Western languages. If you are using Cygwin, you can put this command in ",(0,t.jsx)(n.code,{children:"/etc/profile"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"Set the console font to Lucida Console, because the raster font does not work with the ANSI code page."}),"\n",(0,t.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,t.jsxs)(n.p,{children:["Start ",(0,t.jsx)(n.code,{children:"psql"})," in interactive mode:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"psql -p 54321 -U sally mydatabase\n"})}),"\n",(0,t.jsxs)(n.p,{children:["In ",(0,t.jsx)(n.code,{children:"psql"})," interactive mode, spread a command over several lines of input. Notice the changing prompt:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"testdb=> CREATE TABLE my_table (\ntestdb(>  first integer not null default 0,\ntestdb(>  second text)\ntestdb-> ;\nCREATE TABLE\n"})}),"\n",(0,t.jsx)(n.p,{children:"Look at the table definition:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:'testdb=> \\d my_table\n             Table "public.my_table"\n Column    |  Type   |      Modifiers\n-----------+---------+--------------------\n first     | integer | not null default 0\n second    | text    |\nDistributed by: (first)\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Run ",(0,t.jsx)(n.code,{children:"psql"})," in non-interactive mode by passing in a file containing SQL commands:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"psql -f /home/gpadmin/test/myscript.sql\n"})})]})}function h(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},11151:(e,n,s)=>{s.d(n,{Z:()=>a,a:()=>o});var t=s(67294);const i={},r=t.createContext(i);function o(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);