"use strict";(self.webpackChunkApache_Cloudberry_Incubating_website=self.webpackChunkApache_Cloudberry_Incubating_website||[]).push([[5873],{76490:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>l});var t=s(85893),i=s(11151);const o={title:"gpload"},r="gpload",a={id:"sys-utilities/gpload",title:"gpload",description:"Runs a load job as defined in a YAML formatted control file.",source:"@site/docs/sys-utilities/gpload.md",sourceDirName:"sys-utilities",slug:"/sys-utilities/gpload",permalink:"/zh/docs/sys-utilities/gpload",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/cloudberry-site/edit/main/docs/sys-utilities/gpload.md",tags:[],version:"current",lastUpdatedBy:"Dianjin Wang",lastUpdatedAt:1733824616,formattedLastUpdatedAt:"2024\u5e7412\u670810\u65e5",frontMatter:{title:"gpload"},sidebar:"docsbars",previous:{title:"gpinitsystem",permalink:"/zh/docs/sys-utilities/gpinitsystem"},next:{title:"gplogfilter",permalink:"/zh/docs/sys-utilities/gplogfilter"}},d={},l=[{value:"Synopsis",id:"synopsis",level:2},{value:"Requirements",id:"requirements",level:2},{value:"Description",id:"description",level:2},{value:"Options",id:"options",level:2},{value:"Connection options",id:"connection-options",level:3},{value:"Control File Format",id:"control-file-format",level:2},{value:"Log File Format",id:"log-file-format",level:2},{value:"Notes",id:"notes",level:2},{value:"Examples",id:"examples",level:2},{value:"See also",id:"see-also",level:2}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"gpload",children:"gpload"}),"\n",(0,t.jsx)(n.p,{children:"Runs a load job as defined in a YAML formatted control file."}),"\n",(0,t.jsx)(n.h2,{id:"synopsis",children:"Synopsis"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"gpload -f <control_file> [-l <log_file>] [-h <hostname>] [-p <port>] \n   [-U <username>] [-d <database>] [-W] [--gpfdist_timeout <seconds>] \n   [--no_auto_trans] [--max_retries <retry_times>] [[-v | -V] [-q]] [-D]\n\ngpload -? \n\ngpload --version\n"})}),"\n",(0,t.jsx)(n.h2,{id:"requirements",children:"Requirements"}),"\n",(0,t.jsxs)(n.p,{children:["The client machine where ",(0,t.jsx)(n.code,{children:"gpload"})," is run must have the following:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.a,{href:"/zh/docs/sys-utilities/gpfdist",children:"gpfdist"})," parallel file distribution program installed and in your ",(0,t.jsx)(n.code,{children:"$PATH"}),". This program is located in ",(0,t.jsx)(n.code,{children:"$GPHOME/bin"})," of your Cloudberry Database server installation."]}),"\n",(0,t.jsx)(n.li,{children:"Network access to and from all hosts in your Cloudberry Database array (coordinator and segments)."}),"\n",(0,t.jsx)(n.li,{children:"Network access to and from the hosts where the data to be loaded resides (ETL servers)."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"description",children:"Description"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"gpload"})," is a data loading utility that acts as an interface to the Cloudberry Database external table parallel loading feature. Using a load specification defined in a YAML formatted control file, ",(0,t.jsx)(n.code,{children:"gpload"})," runs a load by invoking the Cloudberry Database parallel file server (",(0,t.jsx)(n.a,{href:"/zh/docs/sys-utilities/gpfdist",children:"gpfdist"}),"), creating an external table definition based on the source data defined, and running an ",(0,t.jsx)(n.code,{children:"INSERT"}),", ",(0,t.jsx)(n.code,{children:"UPDATE"})," or ",(0,t.jsx)(n.code,{children:"MERGE"})," operation to load the source data into the target table in the database."]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note"})," ",(0,t.jsx)(n.code,{children:"MERGE"})," and ",(0,t.jsx)(n.code,{children:"UPDATE"}),' operations are not supported if the target table column name is a reserved keyword, has capital letters, or includes any character that requires quotes (" ") to identify the column.']}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["The operation, including any SQL commands specified in the ",(0,t.jsx)(n.code,{children:"SQL"})," collection of the YAML control file (see ",(0,t.jsx)(n.a,{href:"#control-file-format",children:"Control file format"}),"), are performed as a single transaction to prevent inconsistent data when performing multiple, simultaneous load operations on a target table."]}),"\n",(0,t.jsx)(n.h2,{id:"options",children:"Options"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-f control_file"})})}),"\n",(0,t.jsxs)(n.p,{children:["Required. A YAML file that contains the load specification details. See ",(0,t.jsx)(n.a,{href:"#control-file-format",children:"Control file format"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"--gpfdist_timeout seconds"})})}),"\n",(0,t.jsxs)(n.p,{children:["Sets the timeout for the ",(0,t.jsx)(n.code,{children:"gpfdist"})," parallel file distribution program to send a response. Enter a value from ",(0,t.jsx)(n.code,{children:"0"})," to ",(0,t.jsx)(n.code,{children:"30"}),' seconds (entering "',(0,t.jsx)(n.code,{children:"0"}),'" to deactivates timeouts). Note that you might need to increase this value when operating on high-traffic networks.']}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-l log_file"})})}),"\n",(0,t.jsxs)(n.p,{children:["Specifies where to write the log file. Defaults to ",(0,t.jsx)(n.code,{children:"~/gpAdminLogs/gpload_YYYYMMDD"}),". For more information about the log file, see ",(0,t.jsx)(n.a,{href:"#log-file-format",children:"Log file format"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"--no_auto_trans"})})}),"\n",(0,t.jsxs)(n.p,{children:["Specify ",(0,t.jsx)(n.code,{children:"--no_auto_trans"})," to deactivate processing the load operation as a single transaction if you are performing a single load operation on the target table."]}),"\n",(0,t.jsxs)(n.p,{children:["By default, ",(0,t.jsx)(n.code,{children:"gpload"})," processes each load operation as a single transaction to prevent inconsistent data when performing multiple, simultaneous operations on a target table."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-q (no screen output)"})})}),"\n",(0,t.jsx)(n.p,{children:"Run in quiet mode. Command output is not displayed on the screen, but is still written to the log file."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-D (debug mode)"})})}),"\n",(0,t.jsx)(n.p,{children:"Check for error conditions, but do not run the load."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-v (verbose mode)"})})}),"\n",(0,t.jsx)(n.p,{children:"Show verbose output of the load steps as they are run."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-V (very verbose mode)"})})}),"\n",(0,t.jsx)(n.p,{children:"Shows very verbose output."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-? (show help)"})})}),"\n",(0,t.jsx)(n.p,{children:"Show help, then exit."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"--version"})})}),"\n",(0,t.jsx)(n.p,{children:"Show the version of this utility, then exit."}),"\n",(0,t.jsx)(n.h3,{id:"connection-options",children:"Connection options"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-d database"})})}),"\n",(0,t.jsxs)(n.p,{children:["The database to load into. If not specified, reads from the load control file, the environment variable ",(0,t.jsx)(n.code,{children:"$PGDATABASE"})," or defaults to the current system user name."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-h hostname"})})}),"\n",(0,t.jsxs)(n.p,{children:["Specifies the host name of the machine on which the Cloudberry Database coordinator database server is running. If not specified, reads from the load control file, the environment variable ",(0,t.jsx)(n.code,{children:"$PGHOST"})," or defaults to ",(0,t.jsx)(n.code,{children:"localhost"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-p port"})})}),"\n",(0,t.jsxs)(n.p,{children:["Specifies the TCP port on which the Cloudberry Database coordinator database server is listening for connections. If not specified, reads from the load control file, the environment variable ",(0,t.jsx)(n.code,{children:"$PGPORT"})," or defaults to 5432."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"--max_retries retry_times"})})}),"\n",(0,t.jsxs)(n.p,{children:["Specifies the maximum number of times ",(0,t.jsx)(n.code,{children:"gpload"})," attempts to connect to Cloudberry Database after a connection timeout. The default value is ",(0,t.jsx)(n.code,{children:"0"}),", do not attempt to connect after a connection timeout. A negative integer, such as ",(0,t.jsx)(n.code,{children:"-1"}),", specifies an unlimited number of attempts."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-U username"})})}),"\n",(0,t.jsxs)(n.p,{children:["The database role name to connect as. If not specified, reads from the load control file, the environment variable ",(0,t.jsx)(n.code,{children:"$PGUSER"})," or defaults to the current system user name."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"-W (force password prompt)"})})}),"\n",(0,t.jsxs)(n.p,{children:["Force a password prompt. If not specified, reads the password from the environment variable ",(0,t.jsx)(n.code,{children:"$PGPASSWORD"})," or from a password file specified by ",(0,t.jsx)(n.code,{children:"$PGPASSFILE"})," or in ",(0,t.jsx)(n.code,{children:"~/.pgpass"}),". If these are not set, then ",(0,t.jsx)(n.code,{children:"gpload"})," will prompt for a password even if ",(0,t.jsx)(n.code,{children:"-W"})," is not supplied."]}),"\n",(0,t.jsx)(n.h2,{id:"control-file-format",children:"Control File Format"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"gpload"})," control file uses the ",(0,t.jsx)(n.a,{href:"http://yaml.org/spec/1.1/",children:"YAML 1.1"})," document format and then implements its own schema for defining the various steps of a Cloudberry Database load operation. The control file must be a valid YAML document."]}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"gpload"})," program processes the control file document in order and uses indentation (spaces) to determine the document hierarchy and the relationships of the sections to one another. The use of white space is significant. White space should not be used simply for formatting purposes, and tabs should not be used at all."]}),"\n",(0,t.jsx)(n.p,{children:"The basic structure of a load control file is:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yml",children:"---\nVERSION: 1.0.0.1\nDATABASE: <db_name>\nUSER: <db_username>\nHOST: <coordinator_hostname>\nPORT: <coordinator_port>\nGPLOAD:\n   INPUT:\n    - SOURCE:\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0LOCAL_HOSTNAME:\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0- <hostname_or_ip>\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0PORT: <http_port>\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0| PORT_RANGE: [<start_port_range>, <end_port_range>]\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0FILE: \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0- </path/to/input_file>\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0SSL: true | false\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0CERTIFICATES_PATH: </path/to/certificates>\n    - FULLY_QUALIFIED_DOMAIN_NAME: true | false\n    - COLUMNS:\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0- <field_name>: <data_type>\n    - TRANSFORM: '<transformation>'\n\xa0\xa0\xa0\xa0- TRANSFORM_CONFIG: '<configuration-file-path>' \n\xa0\xa0\xa0\xa0- MAX_LINE_LENGTH: <integer> \n\xa0\xa0\xa0\xa0- FORMAT: text | csv\n\xa0\xa0\xa0\xa0- DELIMITER: '<delimiter_character>'\n\xa0\xa0\xa0\xa0- ESCAPE: '<escape_character>' | 'OFF'\n\xa0\xa0\xa0\xa0- NEWLINE: 'LF' | 'CR' | 'CRLF'\n\xa0\xa0\xa0\xa0- NULL_AS: '<null_string>'\n    - FILL_MISSING_FIELDS: true | false\n\xa0\xa0\xa0\xa0- FORCE_NOT_NULL: true | false\n\xa0\xa0\xa0\xa0- QUOTE: '<csv_quote_character>'\n\xa0\xa0\xa0\xa0- HEADER: true | false\n\xa0\xa0\xa0\xa0- ENCODING: <database_encoding>\n    - ERROR_LIMIT: <integer>\n    - LOG_ERRORS: true | false\n   EXTERNAL:\n      - SCHEMA: <schema> | '%'\n   OUTPUT:\n    - TABLE: <schema.table_name>\n    - MODE: insert | update | merge\n    - MATCH_COLUMNS:\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0- <target_column_name>\n    - UPDATE_COLUMNS:\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0- <target_column_name>\n    - UPDATE_CONDITION: '<boolean_condition>'\n    - MAPPING:\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0   <target_column_name>: <source_column_name> | '<expression>'\n   PRELOAD:\n    - TRUNCATE: true | false\n    - REUSE_TABLES: true | false\n    - STAGING_TABLE: <external_table_name>\n    - FAST_MATCH: true | false\n   SQL:\n    - BEFORE: \"<sql_command>\"\n    - AFTER: \"<sql_command>\"\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"VERSION"})})}),"\n",(0,t.jsxs)(n.p,{children:["Optional. The version of the ",(0,t.jsx)(n.code,{children:"gpload"})," control file schema. The current version is 1.0.0.1."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"DATABASE"})})}),"\n",(0,t.jsxs)(n.p,{children:["Optional. Specifies which database in the Cloudberry Database system to connect to. If not specified, defaults to ",(0,t.jsx)(n.code,{children:"$PGDATABASE"})," if set or the current system user name. You can also specify the database on the command line using the ",(0,t.jsx)(n.code,{children:"-d"})," option."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"USER"})})}),"\n",(0,t.jsxs)(n.p,{children:["Optional. Specifies which database role to use to connect. If not specified, defaults to the current user or ",(0,t.jsx)(n.code,{children:"$PGUSER"})," if set. You can also specify the database role on the command line using the ",(0,t.jsx)(n.code,{children:"-U"})," option."]}),"\n",(0,t.jsxs)(n.p,{children:["If the user running ",(0,t.jsx)(n.code,{children:"gpload"})," is not a Cloudberry Database superuser, then the appropriate rights must be granted to the user for the load to be processed."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"HOST"})})}),"\n",(0,t.jsxs)(n.p,{children:["Optional. Specifies Cloudberry Database coordinator host name. If not specified, defaults to localhost or ",(0,t.jsx)(n.code,{children:"$PGHOST"})," if set. You can also specify the coordinator host name on the command line using the ",(0,t.jsx)(n.code,{children:"-h"})," option."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"PORT"})})}),"\n",(0,t.jsxs)(n.p,{children:["Optional. Specifies Cloudberry Database coordinator port. If not specified, defaults to 5432 or ",(0,t.jsx)(n.code,{children:"$PGPORT"})," if set. You can also specify the coordinator port on the command line using the ",(0,t.jsx)(n.code,{children:"-p"})," option."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"GPLOAD"})})}),"\n",(0,t.jsxs)(n.p,{children:["Required. Begins the load specification section. A ",(0,t.jsx)(n.code,{children:"GPLOAD"})," specification must have an ",(0,t.jsx)(n.code,{children:"INPUT"})," and an ",(0,t.jsx)(n.code,{children:"OUTPUT"})," section defined."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"INPUT"})})}),"\n",(0,t.jsxs)(n.p,{children:["Required. Defines the location and the format of the input data to be loaded. ",(0,t.jsx)(n.code,{children:"gpload"})," will start one or more instances of the ",(0,t.jsx)(n.a,{href:"/zh/docs/sys-utilities/gpfdist",children:"gpfdist"})," file distribution program on the current host and create the required external table definition(s) in Cloudberry Database that point to the source data. Note that the host from which you run ",(0,t.jsx)(n.code,{children:"gpload"})," must be accessible over the network by all Cloudberry Database hosts (coordinator and segments)."]}),"\n",(0,t.jsx)(n.p,{children:"SOURCE**"}),"\n",(0,t.jsxs)(n.p,{children:["Required. The ",(0,t.jsx)(n.code,{children:"SOURCE"})," block of an ",(0,t.jsx)(n.code,{children:"INPUT"})," specification defines the location of a source file. An ",(0,t.jsx)(n.code,{children:"INPUT"})," section can have more than one ",(0,t.jsx)(n.code,{children:"SOURCE"})," block defined. Each ",(0,t.jsx)(n.code,{children:"SOURCE"})," block defined corresponds to one instance of the ",(0,t.jsx)(n.a,{href:"/zh/docs/sys-utilities/gpfdist",children:"gpfdist"})," file distribution program that will be started on the local machine. Each ",(0,t.jsx)(n.code,{children:"SOURCE"})," block defined must have a ",(0,t.jsx)(n.code,{children:"FILE"})," specification."]}),"\n",(0,t.jsxs)(n.p,{children:["For more information about using the ",(0,t.jsx)(n.code,{children:"gpfdist"})," parallel file server and single and multiple ",(0,t.jsx)(n.code,{children:"gpfdist"})," instances, see ",(0,t.jsx)(n.a,{href:"../data-loading/load-data-using-gpfdist.md",children:"Loading data"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"LOCAL_HOSTNAME"})})}),"\n",(0,t.jsxs)(n.p,{children:["Optional. Specifies the host name or IP address of the local machine on which ",(0,t.jsx)(n.code,{children:"gpload"})," is running. If this machine is configured with multiple network interface cards (NICs), you can specify the host name or IP of each individual NIC to allow network traffic to use all NICs simultaneously. The default is to use the local machine's primary host name or IP only."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"PORT"})})}),"\n",(0,t.jsxs)(n.p,{children:["Optional. Specifies the specific port number that the ",(0,t.jsx)(n.a,{href:"/zh/docs/sys-utilities/gpfdist",children:"gpfdist"})," file distribution program should use. You can also supply a ",(0,t.jsx)(n.code,{children:"PORT_RANGE"})," to select an available port from the specified range. If both ",(0,t.jsx)(n.code,{children:"PORT"})," and ",(0,t.jsx)(n.code,{children:"PORT_RANGE"})," are defined, then ",(0,t.jsx)(n.code,{children:"PORT"})," takes precedence. If neither ",(0,t.jsx)(n.code,{children:"PORT"})," or ",(0,t.jsx)(n.code,{children:"PORT_RANGE"})," are defined, the default is to select an available port between 8000 and 9000."]}),"\n",(0,t.jsxs)(n.p,{children:["If multiple host names are declared in ",(0,t.jsx)(n.code,{children:"LOCAL_HOSTNAME"}),", this port number is used for all hosts. This configuration is desired if you want to use all NICs to load the same file or set of files in a given directory location."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"PORT_RANGE"})})}),"\n",(0,t.jsxs)(n.p,{children:["Optional. Can be used instead of ",(0,t.jsx)(n.code,{children:"PORT"})," to supply a range of port numbers from which ",(0,t.jsx)(n.code,{children:"gpload"})," can choose an available port for this instance of the ",(0,t.jsx)(n.a,{href:"/zh/docs/sys-utilities/gpfdist",children:"gpfdist"})," file distribution program."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"FILE"})})}),"\n",(0,t.jsx)(n.p,{children:"Required. Specifies the location of a file, named pipe, or directory location on the local file system that contains data to be loaded. You can declare more than one file so long as the data is of the same format in all files specified."}),"\n",(0,t.jsxs)(n.p,{children:["If the files are compressed using ",(0,t.jsx)(n.code,{children:"gzip"})," or ",(0,t.jsx)(n.code,{children:"bzip2"})," (have a ",(0,t.jsx)(n.code,{children:".gz"})," or ",(0,t.jsx)(n.code,{children:".bz2"})," file extension), the files will be uncompressed automatically (provided that ",(0,t.jsx)(n.code,{children:"gunzip"})," or ",(0,t.jsx)(n.code,{children:"bunzip2"})," is in your path)."]}),"\n",(0,t.jsxs)(n.p,{children:["When specifying which source files to load, you can use the wildcard character (",(0,t.jsx)(n.code,{children:"*"}),") or other C-style pattern matching to denote multiple files. The files specified are assumed to be relative to the current directory from which ",(0,t.jsx)(n.code,{children:"gpload"})," is run (or you can declare an absolute path)."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"SSL"})})}),"\n",(0,t.jsxs)(n.p,{children:["Optional. Specifies usage of SSL encryption. If ",(0,t.jsx)(n.code,{children:"SSL"})," is set to true, ",(0,t.jsx)(n.code,{children:"gpload"})," starts the ",(0,t.jsx)(n.code,{children:"gpfdist"})," server with the ",(0,t.jsx)(n.code,{children:"--ssl"})," option and uses the ",(0,t.jsx)(n.code,{children:"gpfdists://"})," protocol."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"CERTIFICATES_PATH"})})}),"\n",(0,t.jsxs)(n.p,{children:["Required when SSL is ",(0,t.jsx)(n.code,{children:"true"}),"; cannot be specified when SSL is ",(0,t.jsx)(n.code,{children:"false"})," or unspecified. The location specified in ",(0,t.jsx)(n.code,{children:"CERTIFICATES_PATH"})," must contain the following files:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The server certificate file, ",(0,t.jsx)(n.code,{children:"server.crt"})]}),"\n",(0,t.jsxs)(n.li,{children:["The server private key file, ",(0,t.jsx)(n.code,{children:"server.key"})]}),"\n",(0,t.jsxs)(n.li,{children:["The trusted certificate authorities, ",(0,t.jsx)(n.code,{children:"root.crt"})]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["The root directory (",(0,t.jsx)(n.code,{children:"/"}),") cannot be specified as ",(0,t.jsx)(n.code,{children:"CERTIFICATES_PATH"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"FULLY_QUALIFIED_DOMAIN_NAME"})})}),"\n",(0,t.jsxs)(n.p,{children:["Optional. Specifies whether ",(0,t.jsx)(n.code,{children:"gpload"})," resolve hostnames to the fully qualified domain name (FQDN) or the local hostname. If the value is set to ",(0,t.jsx)(n.code,{children:"true"}),", names are resolved to the FQDN. If the value is set to ",(0,t.jsx)(n.code,{children:"false"}),", resolution is to the local hostname. The default is ",(0,t.jsx)(n.code,{children:"false"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["A fully qualified domain name might be required in some situations. For example, if the Cloudberry Database system is in a different domain than an ETL application that is being accessed by ",(0,t.jsx)(n.code,{children:"gpload"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"COLUMNS"})})}),"\n",(0,t.jsxs)(n.p,{children:["Optional. Specifies the schema of the source data file(s) in the format of ",(0,t.jsx)(n.code,{children:"field_name:data_type"}),". The ",(0,t.jsx)(n.code,{children:"DELIMITER"})," character in the source file is what separates two data value fields (columns). A row is determined by a line feed character (",(0,t.jsx)(n.code,{children:"0x0a"}),")."]}),"\n",(0,t.jsxs)(n.p,{children:["If the input ",(0,t.jsx)(n.code,{children:"COLUMNS"})," are not specified, then the schema of the output ",(0,t.jsx)(n.code,{children:"TABLE"})," is implied, meaning that the source data must have the same column order, number of columns, and data format as the target table."]}),"\n",(0,t.jsxs)(n.p,{children:["The default source-to-target mapping is based on a match of column names as defined in this section and the column names in the target ",(0,t.jsx)(n.code,{children:"TABLE"}),". This default mapping can be overridden using the ",(0,t.jsx)(n.code,{children:"MAPPING"})," section."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"TRANSFORM"})})}),"\n",(0,t.jsxs)(n.p,{children:["Optional. Specifies the name of the input transformation passed to ",(0,t.jsx)(n.code,{children:"gpload"}),". For information about XML transformations, see ",(0,t.jsx)(n.a,{href:"../data-loading/load-data-using-gpload.md",children:"Loading and Unloading Data"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"TRANSFORM_CONFIG"})})}),"\n",(0,t.jsxs)(n.p,{children:["Required when ",(0,t.jsx)(n.code,{children:"TRANSFORM"})," is specified. Specifies the location of the transformation configuration file that is specified in the ",(0,t.jsx)(n.code,{children:"TRANSFORM"})," parameter, above."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"MAX_LINE_LENGTH"})})}),"\n",(0,t.jsxs)(n.p,{children:["Optional. An integer that specifies the maximum length of a line in the XML transformation data passed to ",(0,t.jsx)(n.code,{children:"gpload"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"FORMAT"})})}),"\n",(0,t.jsxs)(n.p,{children:["Optional. Specifies the format of the source data file(s) - either plain text (",(0,t.jsx)(n.code,{children:"TEXT"}),") or comma separated values (",(0,t.jsx)(n.code,{children:"CSV"}),") format. Defaults to ",(0,t.jsx)(n.code,{children:"TEXT"})," if not specified. For more information about the format of the source data, see ",(0,t.jsx)(n.a,{href:"../data-loading/",children:"Loading data"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"DELIMITER"})})}),"\n",(0,t.jsxs)(n.p,{children:["Optional. Specifies a single ASCII character that separates columns within each row (line) of data. The default is a tab character in TEXT mode, a comma in CSV mode. You can also specify a non- printable ASCII character or a non-printable unicode character, for example: ",(0,t.jsx)(n.code,{children:'"\\x1B"'})," or ",(0,t.jsx)(n.code,{children:'"\\u001B"'}),". The escape string syntax, ",(0,t.jsx)(n.code,{children:"E'<character-code>'"}),", is also supported for non-printable characters. The ASCII or unicode character must be enclosed in single quotes. For example: ",(0,t.jsx)(n.code,{children:"E'\\x1B'"})," or ",(0,t.jsx)(n.code,{children:"E'\\u001B'"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"ESCAPE"})})}),"\n",(0,t.jsxs)(n.p,{children:["Specifies the single character that is used for C escape sequences (such as ",(0,t.jsx)(n.code,{children:"\\n"}),", ",(0,t.jsx)(n.code,{children:"\\t"}),", ",(0,t.jsx)(n.code,{children:"\\100"}),", and so on) and for escaping data characters that might otherwise be taken as row or column delimiters. Make sure to choose an escape character that is not used anywhere in your actual column data. The default escape character is a \\ (backslash) for text-formatted files and a ",(0,t.jsx)(n.code,{children:'"'})," (double quote) for csv-formatted files, however it is possible to specify another character to represent an escape. It is also possible to deactivate escaping in text-formatted files by specifying the value ",(0,t.jsx)(n.code,{children:"'OFF'"})," as the escape value. This is very useful for data such as text-formatted web log data that has many embedded backslashes that are not intended to be escapes."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"NEWLINE"})})}),"\n",(0,t.jsx)(n.p,{children:"Specifies the type of newline used in your data files, one of:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"LF (Line feed, 0x0A)"}),"\n",(0,t.jsx)(n.li,{children:"CR (Carriage return, 0x0D)"}),"\n",(0,t.jsx)(n.li,{children:"CRLF (Carriage return plus line feed, 0x0D 0x0A)."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"If not specified, Cloudberry Database detects the newline type by examining the first row of data that it receives, and uses the first newline type that it encounters."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"NULL_AS"})})}),"\n",(0,t.jsxs)(n.p,{children:["Optional. Specifies the string that represents a null value. The default is ",(0,t.jsx)(n.code,{children:"\\N"})," (backslash-N) in ",(0,t.jsx)(n.code,{children:"TEXT"})," mode, and an empty value with no quotations in ",(0,t.jsx)(n.code,{children:"CSV"})," mode. You might prefer an empty string even in ",(0,t.jsx)(n.code,{children:"TEXT"})," mode for cases where you do not want to distinguish nulls from empty strings. Any source data item that matches this string will be considered a null value."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"FILL_MISSING_FIELDS"})})}),"\n",(0,t.jsxs)(n.p,{children:["Optional. The default value is ",(0,t.jsx)(n.code,{children:"false"}),". When reading a row of data that has missing trailing field values (the row of data has missing data fields at the end of a line or row), Cloudberry Database returns an error."]}),"\n",(0,t.jsxs)(n.p,{children:["If the value is ",(0,t.jsx)(n.code,{children:"true"}),", when reading a row of data that has missing trailing field values, the values are set to ",(0,t.jsx)(n.code,{children:"NULL"}),". Blank rows, fields with a ",(0,t.jsx)(n.code,{children:"NOT NULL"})," constraint, and trailing delimiters on a line will still report an error."]}),"\n",(0,t.jsxs)(n.p,{children:["See the ",(0,t.jsx)(n.code,{children:"FILL MISSING FIELDS"})," clause of the ",(0,t.jsx)(n.a,{href:"/zh/docs/sql-stmts/create-external-table",children:(0,t.jsx)(n.code,{children:"CREATE EXTERNAL TABLE"})})," command."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"FORCE_NOT_NULL"})})}),"\n",(0,t.jsx)(n.p,{children:"Optional. In CSV mode, processes each specified column as though it were quoted and hence not a NULL value. For the default null string in CSV mode (nothing between two delimiters), this causes missing values to be evaluated as zero-length strings."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"QUOTE"})})}),"\n",(0,t.jsxs)(n.p,{children:["Required when ",(0,t.jsx)(n.code,{children:"FORMAT"})," is ",(0,t.jsx)(n.code,{children:"CSV"}),". Specifies the quotation character for ",(0,t.jsx)(n.code,{children:"CSV"})," mode. The default is double-quote (",(0,t.jsx)(n.code,{children:'"'}),")."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"HEADER"})})}),"\n",(0,t.jsx)(n.p,{children:"Optional. Specifies that the first line in the data file(s) is a header row (contains the names of the columns) and should not be included as data to be loaded. If using multiple data source files, all files must have a header row. The default is to assume that the input files do not have a header row."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"ENCODING"})})}),"\n",(0,t.jsxs)(n.p,{children:["Optional. Character set encoding of the source data. Specify a string constant (such as ",(0,t.jsx)(n.code,{children:"'SQL_ASCII'"}),"), an integer encoding number, or ",(0,t.jsx)(n.code,{children:"'DEFAULT'"})," to use the default client encoding. If not specified, the default client encoding is used."]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note"})," If you ",(0,t.jsx)(n.em,{children:"change"})," the ",(0,t.jsx)(n.code,{children:"ENCODING"})," value in an existing ",(0,t.jsx)(n.code,{children:"gpload"})," control file, you must manually drop any external tables that were creating using the previous ",(0,t.jsx)(n.code,{children:"ENCODING"})," configuration. ",(0,t.jsx)(n.code,{children:"gpload"})," does not drop and recreate external tables to use the new ",(0,t.jsx)(n.code,{children:"ENCODING"})," if ",(0,t.jsx)(n.code,{children:"REUSE_TABLES"})," is set to ",(0,t.jsx)(n.code,{children:"true"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"ERROR_LIMIT"})})}),"\n",(0,t.jsxs)(n.p,{children:["Optional. Enables single row error isolation mode for this load operation. When enabled, input rows that have format errors will be discarded provided that the error limit count is not reached on any Cloudberry Database segment instance during input processing. If the error limit is not reached, all good rows will be loaded and any error rows will either be discarded or captured as part of error log information. The default is to cancel the load operation on the first error encountered. Note that single row error isolation only applies to data rows with format errors; for example, extra or missing attributes, attributes of a wrong data type, or invalid client encoding sequences. Constraint errors, such as primary key violations, will still cause the load operation to be cancelled if encountered. For information about handling load errors, see ",(0,t.jsx)(n.a,{href:"../data-loading/",children:"Loading data"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"LOG_ERRORS"})})}),"\n",(0,t.jsxs)(n.p,{children:["Optional when ",(0,t.jsx)(n.code,{children:"ERROR_LIMIT"})," is declared. Value is either ",(0,t.jsx)(n.code,{children:"true"})," or ",(0,t.jsx)(n.code,{children:"false"}),". The default value is ",(0,t.jsx)(n.code,{children:"false"}),". If the value is ",(0,t.jsx)(n.code,{children:"true"}),", rows with formatting errors are logged internally when running in single row error isolation mode. You can examine formatting errors with the Cloudberry Database built-in SQL function ",(0,t.jsx)(n.code,{children:"gp_read_error_log('<table_name>')"}),". If formatting errors are detected when loading data, ",(0,t.jsx)(n.code,{children:"gpload"})," generates a warning message with the name of the table that contains the error information similar to this message."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"<timestamp>|WARN|1 bad row, please use GPDB built-in function gp_read_error_log('table-name') \n    to access the detailed error row\n"})}),"\n",(0,t.jsxs)(n.p,{children:["If ",(0,t.jsx)(n.code,{children:"LOG_ERRORS: true"})," is specified, ",(0,t.jsx)(n.code,{children:"REUSE_TABLES: true"})," must be specified to retain the formatting errors in Cloudberry Database error logs. If ",(0,t.jsx)(n.code,{children:"REUSE_TABLES: true"})," is not specified, the error information is deleted after the ",(0,t.jsx)(n.code,{children:"gpload"})," operation. Only summary information about formatting errors is returned. You can delete the formatting errors from the error logs with the Cloudberry Database function ",(0,t.jsx)(n.code,{children:"gp_truncate_error_log()"}),"."]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note"})," When ",(0,t.jsx)(n.code,{children:"gpfdist"})," reads data and encounters a data formatting error, the error message includes a row number indicating the location of the formatting error. ",(0,t.jsx)(n.code,{children:"gpfdist"})," attempts to capture the row that contains the error. However, ",(0,t.jsx)(n.code,{children:"gpfdist"})," might not capture the exact row for some formatting errors."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"EXTERNAL"})})}),"\n",(0,t.jsxs)(n.p,{children:["Optional. Defines the schema of the external table database objects created by ",(0,t.jsx)(n.code,{children:"gpload"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["The default is to use the Cloudberry Database ",(0,t.jsx)(n.code,{children:"search_path"}),"."]}),"\n",(0,t.jsx)(n.p,{children:":SCHEMA"}),"\n",(0,t.jsxs)(n.p,{children:["Required when ",(0,t.jsx)(n.code,{children:"EXTERNAL"})," is declared. The name of the schema of the external table. If the schema does not exist, an error is returned."]}),"\n",(0,t.jsxs)(n.p,{children:["If ",(0,t.jsx)(n.code,{children:"%"})," (percent character) is specified, the schema of the table name specified by ",(0,t.jsx)(n.code,{children:"TABLE"})," in the ",(0,t.jsx)(n.code,{children:"OUTPUT"})," section is used. If the table name does not specify a schema, the default schema is used."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"OUTPUT"})})}),"\n",(0,t.jsx)(n.p,{children:"Required. Defines the target table and final data column values that are to be loaded into the database."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"TABLE"})})}),"\n",(0,t.jsx)(n.p,{children:"Required. The name of the target table to load into."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"MODE"})})}),"\n",(0,t.jsxs)(n.p,{children:["Optional. Defaults to ",(0,t.jsx)(n.code,{children:"INSERT"})," if not specified. There are three available load modes:"]}),"\n",(0,t.jsx)(n.p,{children:"INSERT - Loads data into the target table using the following method:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"INSERT INTO <target_table> SELECT * FROM <input_data>;\n"})}),"\n",(0,t.jsxs)(n.p,{children:["UPDATE - Updates the ",(0,t.jsx)(n.code,{children:"UPDATE_COLUMNS"})," of the target table where the rows have ",(0,t.jsx)(n.code,{children:"MATCH_COLUMNS"})," attribute values equal to those of the input data, and the optional ",(0,t.jsx)(n.code,{children:"UPDATE_CONDITION"})," is true. ",(0,t.jsx)(n.code,{children:"UPDATE"}),' is not supported if the target table column name is a reserved keyword, has capital letters, or includes any character that requires quotes (" ") to identify the column.']}),"\n",(0,t.jsxs)(n.p,{children:["MERGE - Inserts new rows and updates the ",(0,t.jsx)(n.code,{children:"UPDATE_COLUMNS"})," of existing rows where attribute values are equal to those of the input data, and the optional ",(0,t.jsx)(n.code,{children:"MATCH_COLUMNS"})," is true. New rows are identified when the ",(0,t.jsx)(n.code,{children:"MATCH_COLUMNS"})," value in the source data does not have a corresponding value in the existing data of the target table. In those cases, the ",(0,t.jsx)(n.strong,{children:"entire row"})," from the source file is inserted, not only the ",(0,t.jsx)(n.code,{children:"MATCH"})," and ",(0,t.jsx)(n.code,{children:"UPDATE"})," columns. If there are multiple new ",(0,t.jsx)(n.code,{children:"MATCH_COLUMNS"})," values that are the same, only one new row for that value will be inserted. Use ",(0,t.jsx)(n.code,{children:"UPDATE_CONDITION"})," to filter out the rows to discard. ",(0,t.jsx)(n.code,{children:"MERGE"}),' is not supported if the target table column name is a reserved keyword, has capital letters, or includes any character that requires quotes (" ") to identify the column.']}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"MATCH_COLUMNS"})})}),"\n",(0,t.jsxs)(n.p,{children:["Required if ",(0,t.jsx)(n.code,{children:"MODE"})," is ",(0,t.jsx)(n.code,{children:"UPDATE"})," or ",(0,t.jsx)(n.code,{children:"MERGE"}),". Specifies the column(s) to use as the join condition for the update. The attribute value in the specified target column(s) must be equal to that of the corresponding source data column(s) in order for the row to be updated in the target table."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"UPDATE_COLUMNS"})})}),"\n",(0,t.jsxs)(n.p,{children:["Required if ",(0,t.jsx)(n.code,{children:"MODE"})," is ",(0,t.jsx)(n.code,{children:"UPDATE"})," or ",(0,t.jsx)(n.code,{children:"MERGE"}),". Specifies the column(s) to update for the rows that meet the ",(0,t.jsx)(n.code,{children:"MATCH_COLUMNS"})," criteria and the optional ",(0,t.jsx)(n.code,{children:"UPDATE_CONDITION"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"UPDATE_CONDITION"})})}),"\n",(0,t.jsxs)(n.p,{children:["Optional. Specifies a Boolean condition (similar to what you would declare in a ",(0,t.jsx)(n.code,{children:"WHERE"})," clause) that must be met in order for a row in the target table to be updated."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"MAPPING"})})}),"\n",(0,t.jsxs)(n.p,{children:["Optional. If a mapping is specified, it overrides the default source-to-target column mapping. The default source-to-target mapping is based on a match of column names as defined in the source ",(0,t.jsx)(n.code,{children:"COLUMNS"})," section and the column names of the target ",(0,t.jsx)(n.code,{children:"TABLE"}),". A mapping is specified as either:"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"<target_column_name>: <source_column_name>"})}),"\n",(0,t.jsx)(n.p,{children:"or"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"<target_column_name>: '<expression>'"})}),"\n",(0,t.jsxs)(n.p,{children:["Where ",(0,t.jsx)(n.code,{children:"<expression>"})," is any expression that you would specify in the ",(0,t.jsx)(n.code,{children:"SELECT"})," list of a query, such as a constant value, a column reference, an operator invocation, a function call, and so on."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"PRELOAD"})})}),"\n",(0,t.jsxs)(n.p,{children:["Optional. Specifies operations to run prior to the load operation. Right now the only preload operation is ",(0,t.jsx)(n.code,{children:"TRUNCATE"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"TRUNCATE"})})}),"\n",(0,t.jsxs)(n.p,{children:["Optional. If set to true, ",(0,t.jsx)(n.code,{children:"gpload"})," will remove all rows in the target table prior to loading it. Default is false."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"REUSE_TABLES"})})}),"\n",(0,t.jsxs)(n.p,{children:["Optional. If set to true, ",(0,t.jsx)(n.code,{children:"gpload"})," will not drop the external table objects and staging table objects it creates. These objects will be reused for future load operations that use the same load specifications. This improves performance of trickle loads (ongoing small loads to the same target table)."]}),"\n",(0,t.jsxs)(n.p,{children:["If ",(0,t.jsx)(n.code,{children:"LOG_ERRORS: true"})," is specified, ",(0,t.jsx)(n.code,{children:"REUSE_TABLES: true"})," must be specified to retain the formatting errors in Cloudberry Database error logs. If ",(0,t.jsx)(n.code,{children:"REUSE_TABLES: true"})," is not specified, formatting error information is deleted after the ",(0,t.jsx)(n.code,{children:"gpload"})," operation."]}),"\n",(0,t.jsxs)(n.p,{children:["If the ",(0,t.jsx)(n.code,{children:"<external_table_name>"})," exists, the utility uses the existing table. The utility returns an error if the table schema does not match the ",(0,t.jsx)(n.code,{children:"OUTPUT"})," table schema."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"STAGING_TABLE"})})}),"\n",(0,t.jsxs)(n.p,{children:["Optional. Specify the name of the temporary external table that is created during a ",(0,t.jsx)(n.code,{children:"gpload"})," operation. The external table is used by ",(0,t.jsx)(n.code,{children:"gpfdist"}),". ",(0,t.jsx)(n.code,{children:"REUSE_TABLES: true"})," must also specified. If ",(0,t.jsx)(n.code,{children:"REUSE_TABLES"})," is false or not specified, ",(0,t.jsx)(n.code,{children:"STAGING_TABLE"})," is ignored. By default, ",(0,t.jsx)(n.code,{children:"gpload"})," creates a temporary external table with a randomly generated name."]}),"\n",(0,t.jsxs)(n.p,{children:["If external_table_name contains a period (.), ",(0,t.jsx)(n.code,{children:"gpload"})," returns an error. If the table exists, the utility uses the table. The utility returns an error if the existing table schema does not match the ",(0,t.jsx)(n.code,{children:"OUTPUT"})," table schema."]}),"\n",(0,t.jsxs)(n.p,{children:["The utility uses the value of ",(0,t.jsx)(n.code,{children:"SCHEMA"})," in the ",(0,t.jsx)(n.code,{children:"EXTERNAL"})," section as the schema for ",(0,t.jsx)(n.code,{children:"<external_table_name>"}),". If the ",(0,t.jsx)(n.code,{children:"SCHEMA"})," value is ",(0,t.jsx)(n.code,{children:"%"}),", the schema for ",(0,t.jsx)(n.code,{children:"<external_table_name>"})," is the same as the schema of the target table, the schema of ",(0,t.jsx)(n.code,{children:"TABLE"})," in the ",(0,t.jsx)(n.code,{children:"OUTPUT"})," section."]}),"\n",(0,t.jsxs)(n.p,{children:["If ",(0,t.jsx)(n.code,{children:"SCHEMA"})," is not set, the utility searches for the table (using the schemas in the database ",(0,t.jsx)(n.code,{children:"search_path"}),"). If the table is not found, ",(0,t.jsx)(n.code,{children:"external_table_name"})," is created in the default ",(0,t.jsx)(n.code,{children:"PUBLIC"})," schema."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"gpload"})," creates the staging table using the distribution key(s) of the target table as the distribution key(s) for the staging table. If the target table was created ",(0,t.jsx)(n.code,{children:"DISTRIBUTED RANDOMLY"}),", ",(0,t.jsx)(n.code,{children:"gpload"})," uses ",(0,t.jsx)(n.code,{children:"MATCH_COLUMNS"})," as the staging table's distribution key(s)."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"FAST_MATCH"})})}),"\n",(0,t.jsxs)(n.p,{children:["Optional. If set to true, ",(0,t.jsx)(n.code,{children:"gpload"})," only searches the database for matching external table objects when reusing external tables. The utility does not check the external table column names and column types in the catalog table ",(0,t.jsx)(n.code,{children:"pg_attribute"})," to ensure that the table can be used for a ",(0,t.jsx)(n.code,{children:"gpload"})," operation. Set the value to true to improve ",(0,t.jsx)(n.code,{children:"gpload"})," performance when reusing external table objects and the database catalog table ",(0,t.jsx)(n.code,{children:"pg_attribute"})," contains a large number of rows. The utility returns an error and quits if the column definitions are not compatible."]}),"\n",(0,t.jsx)(n.p,{children:"The default value is false, the utility checks the external table definition column names and column types."}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"REUSE_TABLES: true"})," must also specified. If ",(0,t.jsx)(n.code,{children:"REUSE_TABLES"})," is false or not specified and ",(0,t.jsx)(n.code,{children:"FAST_MATCH: true"})," is specified, ",(0,t.jsx)(n.code,{children:"gpload"})," returns a warning message."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"SQL"})})}),"\n",(0,t.jsxs)(n.p,{children:["Optional. Defines SQL commands to run before and/or after the load operation. You can specify multiple ",(0,t.jsx)(n.code,{children:"BEFORE"})," and/or ",(0,t.jsx)(n.code,{children:"AFTER"})," commands. List commands in the order of desired execution."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"BEFORE"})})}),"\n",(0,t.jsx)(n.p,{children:"Optional. An SQL command to run before the load operation starts. Enclose commands in quotes."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"AFTER"})})}),"\n",(0,t.jsx)(n.p,{children:"Optional. An SQL command to run after the load operation completes. Enclose commands in quotes."}),"\n",(0,t.jsx)(n.h2,{id:"log-file-format",children:"Log File Format"}),"\n",(0,t.jsxs)(n.p,{children:["Log files output by ",(0,t.jsx)(n.code,{children:"gpload"})," have the following format:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"<timestamp>|<level>|<message>\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Where ",(0,t.jsx)(n.code,{children:"<timestamp>"})," takes the form: ",(0,t.jsx)(n.code,{children:"YYYY-MM-DD HH:MM:SS"}),", level is one of ",(0,t.jsx)(n.code,{children:"DEBUG"}),", ",(0,t.jsx)(n.code,{children:"LOG"}),", ",(0,t.jsx)(n.code,{children:"INFO"}),", ",(0,t.jsx)(n.code,{children:"ERROR"}),", and message is a normal text message."]}),"\n",(0,t.jsxs)(n.p,{children:["Some ",(0,t.jsx)(n.code,{children:"INFO"})," messages that may be of interest in the log files are (where # corresponds to the actual number of seconds, units of data, or failed rows):"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"INFO|running time: <#.##> seconds\nINFO|transferred <#.#> kB of <#.#> kB.\nINFO|gpload succeeded\nINFO|gpload succeeded with warnings\nINFO|gpload failed\nINFO|1 bad row\nINFO|<#> bad rows\n"})}),"\n",(0,t.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,t.jsxs)(n.p,{children:["If your database object names were created using a double-quoted identifier (delimited identifier), you must specify the delimited name within single quotes in the ",(0,t.jsx)(n.code,{children:"gpload"})," control file. For example, if you create a table as follows:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:'CREATE TABLE "MyTable" ("MyColumn" text);\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Your YAML-formatted ",(0,t.jsx)(n.code,{children:"gpload"})," control file would refer to the above table and column names as follows:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"- COLUMNS:\n   - '\"MyColumn\"': text\nOUTPUT:\n   - TABLE: public.'\"MyTable\"'\n"})}),"\n",(0,t.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,t.jsxs)(n.p,{children:["Run a load job as defined in ",(0,t.jsx)(n.code,{children:"my_load.yml"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"gpload -f my_load.yml\n"})}),"\n",(0,t.jsx)(n.p,{children:"Example load control file:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yml",children:"---\nVERSION: 1.0.0.1\nDATABASE: ops\nUSER: gpadmin\nHOST: cdw-1\nPORT: 5432\nGPLOAD:\n   INPUT:\n    - SOURCE:\n         LOCAL_HOSTNAME:\n           - etl1-1\n           - etl1-2\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 - etl1-3\n           - etl1-4\n         PORT: 8081\n         FILE: \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0- /var/load/data/*\n    - COLUMNS:\n           - name: text\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0- amount: float4\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0- category: text\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0- descr: text\n           - date: date\n    - FORMAT: text\n    - DELIMITER: '|'\n\xa0\xa0\xa0\xa0- ERROR_LIMIT: 25\n    - LOG_ERRORS: true\n   OUTPUT:\n    - TABLE: payables.expenses\n    - MODE: INSERT\n   PRELOAD:\n    - REUSE_TABLES: true \n\xa0\xa0\xa0SQL:\n\xa0\xa0\xa0- BEFORE: \"INSERT INTO audit VALUES('start', current_timestamp)\"\n\xa0\xa0\xa0- AFTER: \"INSERT INTO audit VALUES('end', current_timestamp)\"\n"})}),"\n",(0,t.jsx)(n.h2,{id:"see-also",children:"See also"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"/zh/docs/sys-utilities/gpfdist",children:"gpfdist"}),", ",(0,t.jsx)(n.a,{href:"/zh/docs/sql-stmts/create-external-table",children:(0,t.jsx)(n.code,{children:"CREATE EXTERNAL TABLE"})})]})]})}function h(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},11151:(e,n,s)=>{s.d(n,{Z:()=>a,a:()=>r});var t=s(67294);const i={},o=t.createContext(i);function r(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);