"use strict";(self.webpackChunkApache_Cloudberry_Incubating_website=self.webpackChunkApache_Cloudberry_Incubating_website||[]).push([[7064],{16153:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>a,contentTitle:()=>i,default:()=>h,frontMatter:()=>s,metadata:()=>c,toc:()=>l});var t=o(85893),r=o(11151);const s={title:"Install Single-Node Apache Cloudberry in a Docker Container (Sandbox)",description:"Learn how to quickly set up and connect to a single-node Apache Cloudberry in a Docker environment."},i=void 0,c={type:"mdx",permalink:"/zh/bootcamp/cbdb-sandbox",source:"@site/src/pages/bootcamp/cbdb-sandbox.md",title:"Install Single-Node Apache Cloudberry in a Docker Container (Sandbox)",description:"Learn how to quickly set up and connect to a single-node Apache Cloudberry in a Docker environment.",frontMatter:{title:"Install Single-Node Apache Cloudberry in a Docker Container (Sandbox)",description:"Learn how to quickly set up and connect to a single-node Apache Cloudberry in a Docker environment."},unlisted:!1},a={},l=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Build the Sandbox",id:"build-the-sandbox",level:2},{value:"Connect to the database",id:"connect-to-the-database",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"This document guides you on how to quickly set up and connect to a single-node Apache Cloudberry in a Docker environment. You can try out Apache Cloudberry by performing some basic operations and running SQL commands."}),"\n",(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsx)(n.p,{children:"This guide is intended for testing or development. DO NOT use it for production."})}),"\n",(0,t.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsx)(n.p,{children:"Make sure that your environment meets the following requirements:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Platform requirement: Any platform with Docker runtime. For details, refer to ",(0,t.jsx)(n.a,{href:"https://www.docker.com/get-started/",children:"Get Started with Docker"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"Other dependencies: Git, SSH, and internet connection"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"build-the-sandbox",children:"Build the Sandbox"}),"\n",(0,t.jsxs)(n.p,{children:["This section introduces how to set up the Docker container in which the source code of Apache Cloudberry v1.5.1 (released in ",(0,t.jsx)(n.a,{href:"https://github.com/apache/cloudberry/releases",children:"Apache Cloudberry Release Page"}),") will be compiled. In this CentOS 7.9 Docker container, a single-node cluster will be initialized with one coordinator and two segments. Both x86 and ARM CPUs (including Apple chips) are supported."]}),"\n",(0,t.jsx)(n.p,{children:"Build steps:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Start Docker Desktop and make sure it is running properly on your host platform."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Download this repository (which is ",(0,t.jsx)(n.a,{href:"https://github.com/apache/cloudberry-bootcamp",children:"apache/cloudberry-bootcamp"}),") to the target machine."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"git clone https://github.com/apache/cloudberry-bootcamp.git\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Enter the repository and run the ",(0,t.jsx)(n.code,{children:"run.sh"})," script to start the Docker container. This will start the automatic installation process."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"cd bootcamp/000-cbdb-sandbox\nchmod +x ./run.sh\nsudo ./run.sh\n"})}),"\n",(0,t.jsx)(n.p,{children:"Once the script finishes without error, the sandbox is built successfully."}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"connect-to-the-database",children:"Connect to the database"}),"\n",(0,t.jsx)(n.p,{children:"You can now connect to the database and try some basic operations."}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Connect to the Docker container from the host machine:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"docker exec -it $(docker ps -q) /bin/bash\n"})}),"\n",(0,t.jsx)(n.p,{children:"If it is successful, you will see the following prompt:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"[root@mdw /]$\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Log into Apache Cloudberry in Docker. See the following commands and example outputs:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:'[root@mdw /] su - gpadmin  # Switches to the gpadmin user.\n\n# Last login: Tue Oct 24 10:26:14 CST 2023 on pts/1\n\n[gpadmin@mdw ~]$ psql  # Connects to the database with the default database name "gpadmin".\n\n# psql (14.4, server 14.4)\n# Type "help" for help.\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"gpadmin=# SELECT VERSION();  -- Checks the database version.\n                                                                                        version\n\n-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n-----\nPostgreSQL 14.4 (Apache Cloudberry 1.0.0 build dev) on aarch64-unknown-linux-gnu, compiled by gcc (GCC) 10.2.1 20210130 (Red Hat 10.2.1-11), 64-bit compiled on Oct 24 2023 10:24:28\n(1 row)\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["In addition to using the ",(0,t.jsx)(n.code,{children:"docker exec"})," command, you can also use the ",(0,t.jsx)(n.code,{children:"ssh"})," command. This command will connect to the database with the default database name ",(0,t.jsx)(n.code,{children:"gpadmin"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"ssh gpadmin@localhost # Password: cbdb@123\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Now you have a Apache Cloudberry and can continue with ",(0,t.jsx)(n.a,{href:"./#2-101-cloudberry-tourials",children:"101 Apache Cloudberry Tutorials"}),"! Enjoy!"]})]})}function h(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},11151:(e,n,o)=>{o.d(n,{Z:()=>c,a:()=>i});var t=o(67294);const r={},s=t.createContext(r);function i(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);